import { Meta, Source } from "@storybook/addon-docs/blocks";

<Meta title="stores/usePymChild" />

# usePymChild

[![github](https://badgen.net/badge/icon/GitHub?icon=github&label)](https://github.com/UrbanInstitute/dataviz-components/blob/main/src/lib/Pym/stores.svelte.js)

A shared rune helper that exposes the active [`pym.js`](https://github.com/pymjs/pym.js/) child instance created by the `<PymChild />` component. Internally it uses Svelte context to share state between the `<PymChild />` component and its descendants.

`<PymChild />` calls `createPymChildState()` automatically, so most projects can just call `usePymChild()` to access the currently active child:

<Source dark code={`
<script>
  import { usePymChild } from "@urbaninstitute/dataviz-components/stores";

const pymChild = usePymChild();

function resize() {
pymChild?.sendHeight();
}

</script>
`} language="svelte" />

**Note**: `usePymChild()` returns `undefined` if called outside a `<PymChild>` component tree. Use optional chaining (`?.`) when calling methods on the returned state.

Advanced scenarios that render the Pym child outside the `<PymChild />` component can invoke `createPymChildState()` manually to seed the state into context before instantiating the child.

[Read more about how to use the PymChild component here](/docs/components-pymchild--docs).

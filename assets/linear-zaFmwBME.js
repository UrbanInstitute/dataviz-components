import{c as an,i as T,a as B,b as on,d as U}from"./string-BqOgh9tw.js";import{b as un,i as fn}from"./init-DewmRu03.js";const cn=Math.sqrt(50),hn=Math.sqrt(10),mn=Math.sqrt(2);function R(n,r,e){const t=(r-n)/Math.max(0,e),i=Math.floor(Math.log10(t)),u=t/Math.pow(10,i),a=u>=cn?10:u>=hn?5:u>=mn?2:1;let f,h,o;return i<0?(o=Math.pow(10,-i)/a,f=Math.round(n*o),h=Math.round(r*o),f/o<n&&++f,h/o>r&&--h,o=-o):(o=Math.pow(10,i)*a,f=Math.round(n/o),h=Math.round(r/o),f*o<n&&++f,h*o>r&&--h),h<f&&.5<=e&&e<2?R(n,r,e*2):[f,h,o]}function sn(n,r,e){if(r=+r,n=+n,e=+e,!(e>0))return[];if(n===r)return[n];const t=r<n,[i,u,a]=t?R(r,n,e):R(n,r,e);if(!(u>=i))return[];const f=u-i+1,h=new Array(f);if(t)if(a<0)for(let o=0;o<f;++o)h[o]=(u-o)/-a;else for(let o=0;o<f;++o)h[o]=(u-o)*a;else if(a<0)for(let o=0;o<f;++o)h[o]=(i+o)/-a;else for(let o=0;o<f;++o)h[o]=(i+o)*a;return h}function I(n,r,e){return r=+r,n=+n,e=+e,R(n,r,e)[2]}function ln(n,r,e){r=+r,n=+n,e=+e;const t=r<n,i=t?I(r,n,e):I(n,r,e);return(t?-1:1)*(i<0?1/-i:i)}function dn(n,r){r||(r=[]);var e=n?Math.min(r.length,n.length):0,t=r.slice(),i;return function(u){for(i=0;i<e;++i)t[i]=n[i]*(1-u)+r[i]*u;return t}}function gn(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function yn(n,r){var e=r?r.length:0,t=n?Math.min(e,n.length):0,i=new Array(t),u=new Array(e),a;for(a=0;a<t;++a)i[a]=q(n[a],r[a]);for(;a<e;++a)u[a]=r[a];return function(f){for(a=0;a<t;++a)u[a]=i[a](f);return u}}function Mn(n,r){var e=new Date;return n=+n,r=+r,function(t){return e.setTime(n*(1-t)+r*t),e}}function pn(n,r){var e={},t={},i;(n===null||typeof n!="object")&&(n={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in n?e[i]=q(n[i],r[i]):t[i]=r[i];return function(u){for(i in e)t[i]=e[i](u);return t}}function q(n,r){var e=typeof r,t;return r==null||e==="boolean"?an(r):(e==="number"?T:e==="string"?(t=U(r))?(r=t,B):on:r instanceof U?B:r instanceof Date?Mn:gn(r)?dn:Array.isArray(r)?yn:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?pn:T)(n,r)}function wn(n,r){return n=+n,r=+r,function(e){return Math.round(n*(1-e)+r*e)}}function xn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function $(n,r){if((e=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var e,t=n.slice(0,e);return[t.length>1?t[0]+t.slice(2):t,+n.slice(e+1)]}function b(n){return n=$(Math.abs(n)),n?n[1]:NaN}function kn(n,r){return function(e,t){for(var i=e.length,u=[],a=0,f=n[0],h=0;i>0&&f>0&&(h+f+1>t&&(f=Math.max(1,t-h)),u.push(e.substring(i-=f,i+f)),!((h+=f+1)>t));)f=n[a=(a+1)%n.length];return u.reverse().join(r)}}function An(n){return function(r){return r.replace(/[0-9]/g,function(e){return n[+e]})}}var Nn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E(n){if(!(r=Nn.exec(n)))throw new Error("invalid format: "+n);var r;return new C({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}E.prototype=C.prototype;function C(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}C.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bn(n){n:for(var r=n.length,e=1,t=-1,i;e<r;++e)switch(n[e]){case".":t=i=e;break;case"0":t===0&&(t=e),i=e;break;default:if(!+n[e])break n;t>0&&(t=0);break}return t>0?n.slice(0,t)+n.slice(i+1):n}var W;function vn(n,r){var e=$(n,r);if(!e)return n+"";var t=e[0],i=e[1],u=i-(W=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=t.length;return u===a?t:u>a?t+new Array(u-a+1).join("0"):u>0?t.slice(0,u)+"."+t.slice(u):"0."+new Array(1-u).join("0")+$(n,Math.max(0,r+u-1))[0]}function Y(n,r){var e=$(n,r);if(!e)return n+"";var t=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+t:t.length>i+1?t.slice(0,i+1)+"."+t.slice(i+1):t+new Array(i-t.length+2).join("0")}const Z={"%":(n,r)=>(n*100).toFixed(r),b:n=>Math.round(n).toString(2),c:n=>n+"",d:xn,e:(n,r)=>n.toExponential(r),f:(n,r)=>n.toFixed(r),g:(n,r)=>n.toPrecision(r),o:n=>Math.round(n).toString(8),p:(n,r)=>Y(n*100,r),r:Y,s:vn,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function H(n){return n}var J=Array.prototype.map,K=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Sn(n){var r=n.grouping===void 0||n.thousands===void 0?H:kn(J.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",t=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",u=n.numerals===void 0?H:An(J.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"−":n.minus+"",h=n.nan===void 0?"NaN":n.nan+"";function o(s){s=E(s);var m=s.fill,p=s.align,y=s.sign,v=s.symbol,k=s.zero,S=s.width,D=s.comma,w=s.precision,G=s.trim,l=s.type;l==="n"?(D=!0,l="g"):Z[l]||(w===void 0&&(w=12),G=!0,l="g"),(k||m==="0"&&p==="=")&&(k=!0,m="0",p="=");var rn=v==="$"?e:v==="#"&&/[boxX]/.test(l)?"0"+l.toLowerCase():"",tn=v==="$"?t:/[%p]/.test(l)?a:"",O=Z[l],en=/[defgprs%]/.test(l);w=w===void 0?6:/[gprs]/.test(l)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function V(c){var x=rn,d=tn,A,X,j;if(l==="c")d=O(c)+d,c="";else{c=+c;var P=c<0||1/c<0;if(c=isNaN(c)?h:O(Math.abs(c),w),G&&(c=bn(c)),P&&+c==0&&y!=="+"&&(P=!1),x=(P?y==="("?y:f:y==="-"||y==="("?"":y)+x,d=(l==="s"?K[8+W/3]:"")+d+(P&&y==="("?")":""),en){for(A=-1,X=c.length;++A<X;)if(j=c.charCodeAt(A),48>j||j>57){d=(j===46?i+c.slice(A+1):c.slice(A))+d,c=c.slice(0,A);break}}}D&&!k&&(c=r(c,1/0));var z=x.length+c.length+d.length,M=z<S?new Array(S-z+1).join(m):"";switch(D&&k&&(c=r(M+c,M.length?S-d.length:1/0),M=""),p){case"<":c=x+c+d+M;break;case"=":c=x+M+c+d;break;case"^":c=M.slice(0,z=M.length>>1)+x+c+d+M.slice(z);break;default:c=M+x+c+d;break}return u(c)}return V.toString=function(){return s+""},V}function g(s,m){var p=o((s=E(s),s.type="f",s)),y=Math.max(-8,Math.min(8,Math.floor(b(m)/3)))*3,v=Math.pow(10,-y),k=K[8+y/3];return function(S){return p(v*S)+k}}return{format:o,formatPrefix:g}}var F,_,nn;jn({thousands:",",grouping:[3],currency:["$",""]});function jn(n){return F=Sn(n),_=F.format,nn=F.formatPrefix,F}function Pn(n){return Math.max(0,-b(Math.abs(n)))}function zn(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(b(r)/3)))*3-b(Math.abs(n)))}function Fn(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,b(r)-b(n))+1}function Rn(n){return function(){return n}}function $n(n){return+n}var Q=[0,1];function N(n){return n}function L(n,r){return(r-=n=+n)?function(e){return(e-n)/r}:Rn(isNaN(r)?NaN:.5)}function En(n,r){var e;return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Dn(n,r,e){var t=n[0],i=n[1],u=r[0],a=r[1];return i<t?(t=L(i,t),u=e(a,u)):(t=L(t,i),u=e(u,a)),function(f){return u(t(f))}}function Tn(n,r,e){var t=Math.min(n.length,r.length)-1,i=new Array(t),u=new Array(t),a=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++a<t;)i[a]=L(n[a],n[a+1]),u[a]=e(r[a],r[a+1]);return function(f){var h=un(n,f,1,t)-1;return u[h](i[h](f))}}function In(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Ln(){var n=Q,r=Q,e=q,t,i,u,a=N,f,h,o;function g(){var m=Math.min(n.length,r.length);return a!==N&&(a=En(n[0],n[m-1])),f=m>2?Tn:Dn,h=o=null,s}function s(m){return m==null||isNaN(m=+m)?u:(h||(h=f(n.map(t),r,e)))(t(a(m)))}return s.invert=function(m){return a(i((o||(o=f(r,n.map(t),T)))(m)))},s.domain=function(m){return arguments.length?(n=Array.from(m,$n),g()):n.slice()},s.range=function(m){return arguments.length?(r=Array.from(m),g()):r.slice()},s.rangeRound=function(m){return r=Array.from(m),e=wn,g()},s.clamp=function(m){return arguments.length?(a=m?!0:N,g()):a!==N},s.interpolate=function(m){return arguments.length?(e=m,g()):e},s.unknown=function(m){return arguments.length?(u=m,s):u},function(m,p){return t=m,i=p,g()}}function qn(){return Ln()(N,N)}function Cn(n,r,e,t){var i=ln(n,r,e),u;switch(t=E(t??",f"),t.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(u=zn(i,a))&&(t.precision=u),nn(t,a)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(u=Fn(i,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=u-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(u=Pn(i))&&(t.precision=u-(t.type==="%")*2);break}}return _(t)}function Gn(n){var r=n.domain;return n.ticks=function(e){var t=r();return sn(t[0],t[t.length-1],e??10)},n.tickFormat=function(e,t){var i=r();return Cn(i[0],i[i.length-1],e??10,t)},n.nice=function(e){e==null&&(e=10);var t=r(),i=0,u=t.length-1,a=t[i],f=t[u],h,o,g=10;for(f<a&&(o=a,a=f,f=o,o=i,i=u,u=o);g-- >0;){if(o=I(a,f,e),o===h)return t[i]=a,t[u]=f,r(t);if(o>0)a=Math.floor(a/o)*o,f=Math.ceil(f/o)*o;else if(o<0)a=Math.ceil(a*o)/o,f=Math.floor(f*o)/o;else break;h=o}return n},n}function On(){var n=qn();return n.copy=function(){return In(n,On())},fn.apply(n,arguments),Gn(n)}export{q as a,wn as b,In as c,On as d,_ as f,N as i,Gn as l,Ln as t};

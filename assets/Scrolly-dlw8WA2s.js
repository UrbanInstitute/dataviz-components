var xe=o=>{throw TypeError(o)};var Ce=(o,e,n)=>e.has(o)||xe("Cannot "+n);var c=(o,e,n)=>(Ce(o,e,"read from private field"),n?n.call(o):e.get(o)),B=(o,e,n)=>e.has(o)?xe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,n);import{p as _e,g as i,z as Te,bf as z,bg as Oe,f as $,t as K,b as T,d as Se,c as O,s as He,i as t,X as u,Z as s,v as M,bh as Ve,T as I,bi as Be,a7 as Me,Q as fe,a as ye,y as ve,a5 as me,x as ke}from"./iframe-BjxEKEQH.js";import{e as We,i as Le}from"./each-DC_8OmU5.js";import{h as qe}from"./html-CDri68dQ.js";import{s as P}from"./class-B9SFUanI.js";import{s as he}from"./style-CNURdi_Z.js";import{a as ie}from"./window-C-tkelu3.js";import"./create-runtime-stories-HPq0r60h.js";import{s as we}from"./slot-BP_Qo1ZM.js";import{b as ge}from"./this-DGLcOT4Q.js";import{i as Ee}from"./lifecycle-hO6jUP98.js";import{B as Re}from"./Block-S085LgKA.js";const v=[];let ne;if(typeof window<"u"){const o=()=>v.forEach(e=>e());window.addEventListener("scroll",o),window.addEventListener("resize",o)}if(typeof IntersectionObserver<"u"){const o=new Map,e=new IntersectionObserver((n,f)=>{n.forEach(d=>{const y=o.get(d.target),S=v.indexOf(y);d.isIntersecting?S===-1&&v.push(y):(y(),S!==-1&&v.splice(S,1))})},{rootMargin:"400px 0px"});ne={add:({outer:n,update:f})=>{const{top:d,bottom:y}=n.getBoundingClientRect();d<window.innerHeight&&y>0&&v.push(f),o.set(n,f),e.observe(n)},remove:({outer:n,update:f})=>{const d=v.indexOf(f);d!==-1&&v.splice(d,1),o.delete(n),e.unobserve(n)}}}else ne={add:({update:o})=>{v.push(o)},remove:({update:o})=>{const e=v.indexOf(o);e!==-1&&v.splice(e,1)}};var je=$("<svelte-scroller-outer><svelte-scroller-background-container><svelte-scroller-background><!></svelte-scroller-background></svelte-scroller-background-container> <svelte-scroller-foreground><!></svelte-scroller-foreground></svelte-scroller-outer>",2);function Ae(o,e){_e(e,!1);const n=u(),f=u(),d=u(),y=u(),S=u();let W=i(e,"top",8,0),L=i(e,"bottom",8,1),q=i(e,"threshold",8,.5),re=i(e,"query",8,"section"),E=i(e,"parallax",8,!1),se=i(e,"index",12,0),le=i(e,"count",12,0),ae=i(e,"offset",12,0),R=i(e,"progress",12,0),de=i(e,"visible",12,!1),j=u(),l=u(),H=u(),X,V,r=u(0),m=u(),g=u(0),A=u(1);Te(()=>{V=t(l).querySelectorAll(re()),le(V.length),k();const a={outer:t(j),update:k};return ne.add(a),()=>ne.remove(a)});function k(){if(!t(l))return;const a=t(j).getBoundingClientRect();X=a.left,s(A,a.right-X);const C=t(l).getBoundingClientRect(),ee=t(H).getBoundingClientRect();de(C.top<t(r)&&C.bottom>0);const F=C.bottom-C.top,_=ee.bottom-ee.top,b=t(f)-t(n);R((t(n)-C.top)/(F-b)),R()<=0?(s(g,0),s(m,!1)):R()>=1?(s(g,E()?F-_:F-b),s(m,!1)):(s(g,E()?Math.round(t(n)-R()*(_-b)):t(n)),s(m,!0));for(let x=0;x<V.length;x++){const ue=V[x],{top:te}=ue.getBoundingClientRect(),oe=V[x+1],be=oe?oe.getBoundingClientRect().top:C.bottom;if(ae((t(d)-te)/(be-te)),be>=t(d)){se(x);break}}}z(()=>(M(W()),t(r)),()=>{s(n,Math.round(W()*t(r)))}),z(()=>(M(L()),t(r)),()=>{s(f,Math.round(L()*t(r)))}),z(()=>(M(q()),t(r)),()=>{s(d,Math.round(q()*t(r)))}),z(()=>(M(W()),M(L()),M(q()),M(E())),()=>{W(),L(),q(),E(),k()}),z(()=>(t(m),t(g)),()=>{s(y,`
		position: ${t(m)?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${t(g)}px);
		z-index: 1;
	`)}),z(()=>(t(m),t(A)),()=>{s(S,t(m)?`width:${t(A)}px;`:"")}),Oe(),Ee();var h=je();P(h,1,"svelte-xdbafy");var p=O(h);P(p,1,"background-container svelte-xdbafy");var w=O(p);P(w,1,"svelte-xdbafy");var Y=O(w);we(Y,e,"background",{},null),ge(w,a=>s(H,a),()=>t(H));var N=He(p,2);P(N,1,"svelte-xdbafy");var ce=O(N);we(ce,e,"foreground",{},null),ge(N,a=>s(l,a),()=>t(l)),ge(h,a=>s(j,a),()=>t(j)),K(()=>he(p,`${t(y)??""}${t(S)??""}`)),ie("innerHeight",a=>s(r,a)),T(o,h),Se()}const pe=Symbol("SCROLLY_CONTEXT");var Q,Z,D,G,J,U;class ze{constructor(){B(this,Q,I(0));B(this,Z,I(0));B(this,D,I(0));B(this,G,I(0));B(this,J,I(0));B(this,U,I(0))}get index(){return t(c(this,Q))}set index(e){s(c(this,Q),e,!0)}get offset(){return t(c(this,Z))}set offset(e){s(c(this,Z),e,!0)}get progress(){return t(c(this,D))}set progress(e){s(c(this,D),e,!0)}get slideHeight(){return t(c(this,G))}set slideHeight(e){s(c(this,G),e,!0)}get slideWidth(){return t(c(this,J))}set slideWidth(e){s(c(this,J),e,!0)}get innerHeight(){return t(c(this,U))}set innerHeight(e){s(c(this,U),e,!0)}}Q=new WeakMap,Z=new WeakMap,D=new WeakMap,G=new WeakMap,J=new WeakMap,U=new WeakMap;function Ie(){const o=new ze;return Ve(pe,o),o}function nt(){if(!Be(pe))throw new Error("useScrollyContext() must be called from within a Scrolly component tree. Make sure your component is a child of <Scrolly>.");return Me(pe)}var Pe=$('<div><p class="svelte-1iosyj3"><!></p></div>'),Xe=$('<section class="svelte-1iosyj3"><!></section>'),Ye=$("<div></div>"),Ne=$('<div class="scrolly-wrapper svelte-1iosyj3"><!></div>');function Fe(o,e){_e(e,!0);let n=i(e,"slides",19,()=>[]),f=i(e,"top",3,0),d=i(e,"bottom",3,1),y=i(e,"threshold",3,.75),S=i(e,"spacing",3,.75),W=i(e,"startOffset",3,.5),L=i(e,"endOffset",3,.75),q=i(e,"query",3,"section"),re=i(e,"parallax",3,!1),E=i(e,"foregroundWidth",3,"wide"),se=i(e,"textLayout",3,"center"),le=i(e,"textAlign",3,"center"),ae=i(e,"textMaxWidth",3,580),R=i(e,"textBackground",3,"var(--color-white)"),de=i(e,"textColor",3,"var(--color-gray-darker)"),j=i(e,"boxShadow",3,!0);const l=Ie();var H=Ne();let X;var V=O(H);Ae(V,{get top(){return f()},get bottom(){return d()},get threshold(){return y()},get query(){return q()},get parallax(){return re()},get index(){return l.index},set index(r){l.index=r},get offset(){return l.offset},set offset(r){l.offset=r},get progress(){return l.progress},set progress(r){l.progress=r},$$slots:{background:(r,m)=>{var g=fe(),A=ye(g);{var k=h=>{var p=fe(),w=ye(p);me(w,()=>e.background),T(h,p)};ve(A,h=>{e.background&&h(k)})}T(r,g)},foreground:(r,m)=>{Re(r,{get width(){return E()},slot:"foreground",children:(g,A)=>{var k=Ye();We(k,21,n,Le,(h,p,w)=>{var Y=Xe();const N=ke(()=>w===0),ce=ke(()=>w===n().length-1);let a;var C=O(Y);{var ee=_=>{var b=fe(),x=ye(b);me(x,()=>e.foreground,()=>t(p),()=>w),T(_,b)},F=_=>{var b=Pe();let x;var ue=O(b),te=O(ue);qe(te,()=>t(p)),K(oe=>x=P(b,1,"scrolly-text-box svelte-1iosyj3",null,x,oe),[()=>({"box-shadow":j()})]),T(_,b)};ve(C,_=>{e.foreground?_(ee):_(F,!1)})}K(()=>a=he(Y,"",a,{"margin-top":`${t(N)?l.slideHeight*W():0}px`,"margin-bottom":`${t(ce)?l.slideHeight*L():l.slideHeight*S()}px`})),T(h,Y)}),K(()=>P(k,1,`foreground layout-${se()??""}`,"svelte-1iosyj3")),T(g,k)},$$slots:{default:!0}})}}}),K(()=>X=he(H,"",X,{"--text-align":le(),"--text-max-width":`${ae()??""}px`,"--text-background":R(),"--text-color":de()})),ie("innerHeight",r=>l.innerHeight=r),ie("outerHeight",r=>l.slideHeight=r),ie("innerWidth",r=>l.slideWidth=r),T(o,H),Se()}Fe.__docgen={data:[{name:"slides",visibility:"public",description:"An array of content blocks with text or HTML to use in the foreground of the scrolly component. For default behaviour, this should be an array of strings, but if you are using a custom `foreground` snippet, you can use any type of data structure your project requires",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"any[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"top",visibility:"public",description:"The vertical position that the top of the foreground must scroll past before the background becomes fixed, as a proportion of window height",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"bottom",visibility:"public",description:"The inverse of top â€” once the bottom of the foreground passes this point, the background becomes unfixed",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"1"},{name:"threshold",visibility:"public",description:"Once a section crosses this point, it becomes 'active'",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.75"},{name:"spacing",visibility:"public",description:"The spacing between sections, as a proportion of window height",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.75"},{name:"startOffset",visibility:"public",description:"The spacing before the first section",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.5"},{name:"endOffset",visibility:"public",description:"The spacing after the last section",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.75"},{name:"query",visibility:"public",description:"A CSS selector that describes the individual sections of your foreground",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"section"'},{name:"parallax",visibility:"public",description:"If true, the background will scroll such that the bottom edge reaches the bottom at the same time as the foreground. This effect can be unpleasant for people with high motion sensitivity, so use it advisedly",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"foregroundWidth",visibility:"public",description:"The foreground is wrapped in a layout `Block` component. This property allows you to adjust the width of the layout block for the foreground text.",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"body",text:'"body"'},{kind:"const",type:"string",value:"full",text:'"full"'},{kind:"const",type:"string",value:"wide",text:'"wide"'}],text:'"body" | "full" | "wide"'},static:!1,readonly:!1,defaultValue:'"wide"'},{name:"textLayout",visibility:"public",description:"The layout of the foreground text",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"center",text:'"center"'},{kind:"const",type:"string",value:"left",text:'"left"'},{kind:"const",type:"string",value:"right",text:'"right"'}],text:'"center" | "left" | "right"'},static:!1,readonly:!1,defaultValue:'"center"'},{name:"textAlign",visibility:"public",description:"The text alignment of the foreground text",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"center",text:'"center"'},{kind:"const",type:"string",value:"left",text:'"left"'},{kind:"const",type:"string",value:"right",text:'"right"'}],text:'"center" | "left" | "right"'},static:!1,readonly:!1,defaultValue:'"center"'},{name:"textMaxWidth",visibility:"public",description:"The max width of the foreground text box",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"580"},{name:"textBackground",visibility:"public",description:"The color to use for the background of the text box",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"var(--color-white)"'},{name:"textColor",visibility:"public",description:"The color to use for the foreground text",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"var(--color-gray-darker)"'},{name:"boxShadow",visibility:"public",description:"Should the text box include a box shadow?",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"background",visibility:"public",description:"Optional snippet for custom background component",keywords:[],kind:"let",type:{kind:"function",text:"Snippet<[]>"},static:!1,readonly:!1},{name:"foreground",visibility:"public",description:"Optional snippet for custom foreground content, receives (slide, index)",keywords:[],kind:"let",type:{kind:"function",text:"Snippet<[any, number]>"},static:!1,readonly:!1}],name:"Scrolly.svelte"};export{Fe as S,nt as u};

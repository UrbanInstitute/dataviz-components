import{p as he,o,H as Se,C as m,D as pe,f as K,ah as ee,t as J,b as z,d as be,g as t,F as d,E as i,c as k,s as Oe,A as H,n as Te,ag as Be,a as Ce,k as E,w as I,m as de,l as Z,bb as Me,h as ce}from"./iframe-BcferWuU.js";import{e as He,i as qe}from"./each-CZjc6dyk.js";import{h as We}from"./html-D3p32zG5.js";import{s as P}from"./class-B9SFUanI.js";import{s as fe}from"./style-CNURdi_Z.js";import{a as $}from"./window-SIeXCKpW.js";import{i as xe}from"./lifecycle-BcSUtK95.js";import{b as ue}from"./this-XyIzL1DC.js";import{B as je}from"./Block-UHg9Sqz9.js";const y=[];let te;if(typeof window<"u"){const a=()=>y.forEach(e=>e());window.addEventListener("scroll",a),window.addEventListener("resize",a)}if(typeof IntersectionObserver<"u"){const a=new Map,e=new IntersectionObserver((s,c)=>{s.forEach(r=>{const u=a.get(r.target),h=y.indexOf(u);r.isIntersecting?h===-1&&y.push(u):(u(),h!==-1&&y.splice(h,1))})},{rootMargin:"400px 0px"});te={add:({outer:s,update:c})=>{const{top:r,bottom:u}=s.getBoundingClientRect();r<window.innerHeight&&u>0&&y.push(c),a.set(s,c),e.observe(s)},remove:({outer:s,update:c})=>{const r=y.indexOf(c);r!==-1&&y.splice(r,1),a.delete(s),e.unobserve(s)}}}else te={add:({update:a})=>{y.push(a)},remove:({update:a})=>{const e=y.indexOf(a);e!==-1&&y.splice(e,1)}};var Ae=K("<svelte-scroller-outer><svelte-scroller-background-container><svelte-scroller-background><!></svelte-scroller-background></svelte-scroller-background-container> <svelte-scroller-foreground><!></svelte-scroller-foreground></svelte-scroller-outer>",2);function Le(a,e){he(e,!1);const s=d(),c=d(),r=d(),u=d(),h=d();let q=o(e,"top",8,0),p=o(e,"bottom",8,1),w=o(e,"threshold",8,.5),oe=o(e,"query",8,"section"),W=o(e,"parallax",8,!1),ne=o(e,"index",12,0),se=o(e,"count",12,0),ie=o(e,"offset",12,0),j=o(e,"progress",12,0),re=o(e,"visible",12,!1),A=d(),_=d(),F=d(),N,V,f=d(0),g=d(),S=d(0),O=d(1);Se(()=>{V=t(_).querySelectorAll(oe()),se(V.length),T();const l={outer:t(A),update:T};return te.add(l),()=>te.remove(l)});function T(){if(!t(_))return;const l=t(A).getBoundingClientRect();N=l.left,i(O,l.right-N);const n=t(_).getBoundingClientRect(),U=t(F).getBoundingClientRect();re(n.top<t(f)&&n.bottom>0);const v=n.bottom-n.top,D=U.bottom-U.top,C=t(c)-t(s);j((t(s)-n.top)/(v-C)),j()<=0?(i(S,0),i(g,!1)):j()>=1?(i(S,W()?v-D:v-C),i(g,!1)):(i(S,W()?Math.round(t(s)-j()*(D-C)):t(s)),i(g,!0));for(let M=0;M<V.length;M++){const X=V[M],{top:G}=X.getBoundingClientRect(),R=V[M+1],Y=R?R.getBoundingClientRect().top:n.bottom;if(ie((t(r)-G)/(Y-G)),Y>=t(r)){ne(M);break}}}m(()=>(H(q()),t(f)),()=>{i(s,Math.round(q()*t(f)))}),m(()=>(H(p()),t(f)),()=>{i(c,Math.round(p()*t(f)))}),m(()=>(H(w()),t(f)),()=>{i(r,Math.round(w()*t(f)))}),m(()=>(H(q()),H(p()),H(w()),H(W())),()=>{q(),p(),w(),W(),T()}),m(()=>(t(g),t(S)),()=>{i(u,`
		position: ${t(g)?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${t(S)}px);
		z-index: 1;
	`)}),m(()=>(t(g),t(O)),()=>{i(h,t(g)?`width:${t(O)}px;`:"")}),pe(),xe();var b=Ae();P(b,1,"svelte-xdbafy");var x=k(b);P(x,1,"background-container svelte-xdbafy");var L=k(x);P(L,1,"svelte-xdbafy");var le=k(L);ee(le,e,"background",{},null),ue(L,l=>i(F,l),()=>t(F));var B=Oe(x,2);P(B,1,"svelte-xdbafy");var Q=k(B);ee(Q,e,"foreground",{},null),ue(B,l=>i(_,l),()=>t(_)),ue(b,l=>i(A,l),()=>t(A)),J(()=>fe(x,`${t(u)??""}${t(h)??""}`)),$("innerHeight",l=>i(f,l)),z(a,b),be()}var Re=K('<div><p class="svelte-1iosyj3"><!></p></div>'),Ee=K('<section class="svelte-1iosyj3"><!></section>'),Ie=K("<div></div>"),ze=K('<div class="scrolly-wrapper svelte-1iosyj3"><!></div>');function Pe(a,e){he(e,!1);const[s,c]=Te(),r=()=>Z(x,"$slideHeight",s),u=()=>Z(O,"$index",s),h=()=>Z(T,"$offset",s),q=()=>Z(b,"$progress",s),p=d();let w=o(e,"slides",24,()=>[]),oe=o(e,"top",8,0),W=o(e,"bottom",8,1),ne=o(e,"threshold",8,.75),se=o(e,"spacing",8,.75),ie=o(e,"startOffset",8,.5),j=o(e,"endOffset",8,.75),re=o(e,"query",8,"section"),A=o(e,"parallax",8,!1),_=o(e,"foregroundWidth",8,"wide"),F=o(e,"textLayout",8,"center"),N=o(e,"textAlign",8,"center"),V=o(e,"textMaxWidth",8,580),f=o(e,"textBackground",8,"var(--color-white)"),g=o(e,"textColor",8,"var(--color-gray-darker)"),S=o(e,"boxShadow",8,!0);const O=I(0),T=I(0),b=I(0),x=I(0),L=I(0),le=I(0);m(()=>{},()=>{i(p,{index:O,offset:T,progress:b,slideHeight:x,slideWidth:L})}),m(()=>t(p),()=>{Me("scrolly",t(p))}),pe(),xe();var B=ze();let Q;var l=k(B);Le(l,{get top(){return oe()},get bottom(){return W()},get threshold(){return ne()},get query(){return re()},get parallax(){return A()},get index(){return de(),u()},set index(n){E(O,n)},get offset(){return de(),h()},set offset(n){E(T,n)},get progress(){return de(),q()},set progress(n){E(b,n)},$$slots:{background:(n,U)=>{var v=Be(),D=Ce(v);ee(D,e,"background",{},null),z(n,v)},foreground:(n,U)=>{je(n,{get width(){return _()},slot:"foreground",children:(v,D)=>{var C=Ie();He(C,5,w,qe,(M,X,G)=>{var R=Ee();const Y=ce(()=>G===0),ve=ce(()=>G===w().length-1);let ye;var me=k(R);ee(me,e,"foreground",{get slide(){return t(X)}},ke=>{var ae=Re();let ge;var we=k(ae),_e=k(we);We(_e,()=>t(X)),J(Ve=>ge=P(ae,1,"scrolly-text-box svelte-1iosyj3",null,ge,Ve),[()=>({"box-shadow":S()})],ce),z(ke,ae)}),J(()=>ye=fe(R,"",ye,{"margin-top":`${t(Y)?r()*ie():0}px`,"margin-bottom":`${t(ve)?r()*j():r()*se()}px`})),z(M,R)}),J(()=>P(C,1,`foreground layout-${F()??""}`,"svelte-1iosyj3")),z(v,C)},$$slots:{default:!0}})}},$$legacy:!0}),J(()=>Q=fe(B,"",Q,{"--text-align":N(),"--text-max-width":`${V()??""}px`,"--text-background":f(),"--text-color":g()})),$("innerHeight",n=>E(le,n)),$("outerHeight",n=>E(x,n)),$("innerWidth",n=>E(L,n)),z(a,B),be(),c()}Pe.__docgen={data:[{name:"slides",visibility:"public",description:"An array of content blocks with text or HTML to use in the foreground of the scrolly component. For default behaviour, this should be an array of strings, but if you are using a custom `foreground` slot, you can use any type of data structure your project requires",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"any[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"top",visibility:"public",description:"The vertical position that the top of the foreground must scroll past before the background becomes fixed, as a proportion of window height",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"bottom",visibility:"public",description:`The inverse of top â€”  once the bottom of the foreground passes this point, the background becomes unfixed
[bottom=1]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"1"},{name:"threshold",visibility:"public",description:`Once a section crosses this point, it becomes 'active'
[threshold=0.75]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.75"},{name:"spacing",visibility:"public",description:`The spacing between sections, as a proportion of window height
[spacing=0.75]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.75"},{name:"startOffset",visibility:"public",description:`The spacing before the first section
[startOffset=0.5]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.5"},{name:"endOffset",visibility:"public",description:`The spacing after the last section
[endOffset=0.75]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0.75"},{name:"query",visibility:"public",description:"A CSS selector that describes the individual sections of your foreground",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"section"'},{name:"parallax",visibility:"public",description:"If true, the background will scroll such that the bottom edge reaches the bottom at the same time as the foreground. This effect can be unpleasant for people with high motion sensitivity, so use it advisedly",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"foregroundWidth",visibility:"public",description:'The foreground is wrapped in a layout `Block` component. This property allows you to adjust the width of the layout block for the foreground text.\n[foregroundWidth="wide"]',keywords:[],kind:"let",type:{kind:"type",type:"any",text:"any"},static:!1,readonly:!1,defaultValue:'"wide"'},{name:"textLayout",visibility:"public",description:"The layout of the foreground text",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"center",text:'"center"'},{kind:"const",type:"string",value:"left",text:'"left"'},{kind:"const",type:"string",value:"right",text:'"right"'}],text:'"center" | "left" | "right"'},static:!1,readonly:!1,defaultValue:'"center"'},{name:"textAlign",visibility:"public",description:"The text alignment of the foreground text",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"center",text:'"center"'},{kind:"const",type:"string",value:"left",text:'"left"'},{kind:"const",type:"string",value:"right",text:'"right"'}],text:'"center" | "left" | "right"'},static:!1,readonly:!1,defaultValue:'"center"'},{name:"textMaxWidth",visibility:"public",description:"The max width of the foreground text box",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"580"},{name:"textBackground",visibility:"public",description:"The color to use for the background of the text box",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"var(--color-white)"'},{name:"textColor",visibility:"public",description:"The color to use for the foreground text",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"var(--color-gray-darker)"'},{name:"boxShadow",visibility:"public",description:`Should the text box include a box shadow?
[boxShadow=true]`,keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"}],name:"Scrolly.svelte"};export{Pe as S};

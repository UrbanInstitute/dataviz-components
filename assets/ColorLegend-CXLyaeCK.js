import{p as ae,i as d,w as Q,x as re,f as wt,A as G,t as _,b as h,d as le,y as N,s as U,c as I,z as H,g as t,q as R,e as kt,a6 as _t,a as it,k as M,h as tt}from"./iframe-Dh-CAoci.js";import{e as at,i as rt}from"./each-r1C57-iw.js";import{s as e}from"./attributes-B9-bxW-k.js";import{s as Ot}from"./class-B9SFUanI.js";import{s as St}from"./style-CNURdi_Z.js";import{b as se}from"./size-CQlcWDwJ.js";import{i as oe}from"./lifecycle-rtcBtEMy.js";import{u as de}from"./urbanColors-BkxYcPwH.js";import{a as ce,b as ue,d as fe,f as Ct}from"./linear-zaFmwBME.js";import{i as Ft}from"./init-DewmRu03.js";import{I as qt}from"./index-_doEQLKC.js";import{a as pe}from"./quantile-Dc72mZUz.js";function zt(s,n,u){s=+s,n=+n,u=(r=arguments.length)<2?(n=s,s=0,1):r<3?1:+u;for(var l=-1,r=Math.max(0,Math.ceil((n-s)/u))|0,i=new Array(r);++l<r;)i[l]=s+l*u;return i}function ye(s,n){for(var u=new Array(n),l=0;l<n;++l)u[l]=s(l/(n-1));return u}const Dt=Symbol("implicit");function Gt(){var s=new qt,n=[],u=[],l=Dt;function r(i){let o=s.get(i);if(o===void 0){if(l!==Dt)return l;s.set(i,o=n.push(i)-1)}return u[o%u.length]}return r.domain=function(i){if(!arguments.length)return n.slice();n=[],s=new qt;for(const o of i)s.has(o)||s.set(o,n.push(o)-1);return r},r.range=function(i){return arguments.length?(u=Array.from(i),r):u.slice()},r.unknown=function(i){return arguments.length?(l=i,r):l},r.copy=function(){return Gt(n,u).unknown(l)},Ft.apply(r,arguments),r}function It(){var s=Gt().unknown(void 0),n=s.domain,u=s.range,l=0,r=1,i,o,W=!1,O=0,c=0,Y=.5;delete s.unknown;function y(){var f=n().length,et=r<l,v=et?r:l,A=et?l:r;i=(A-v)/Math.max(1,f-O+c*2),W&&(i=Math.floor(i)),v+=(A-v-i*(f-O))*Y,o=i*(1-O),W&&(v=Math.round(v),o=Math.round(o));var C=zt(f).map(function(ct){return v+i*ct});return u(et?C.reverse():C)}return s.domain=function(f){return arguments.length?(n(f),y()):n()},s.range=function(f){return arguments.length?([l,r]=f,l=+l,r=+r,y()):[l,r]},s.rangeRound=function(f){return[l,r]=f,l=+l,r=+r,W=!0,y()},s.bandwidth=function(){return o},s.step=function(){return i},s.round=function(f){return arguments.length?(W=!!f,y()):W},s.padding=function(f){return arguments.length?(O=Math.min(1,c=+f),y()):O},s.paddingInner=function(f){return arguments.length?(O=Math.min(1,f),y()):O},s.paddingOuter=function(f){return arguments.length?(c=+f,y()):c},s.align=function(f){return arguments.length?(Y=Math.max(0,Math.min(1,f)),y()):Y},s.copy=function(){return It(n(),[l,r]).round(W).paddingInner(O).paddingOuter(c).align(Y)},Ft.apply(y(),arguments)}var ge=wt('<p class="legend-title svelte-1ioe3b8"> </p>'),me=M("<stop></stop>"),he=M("<defs><linearGradient></linearGradient></defs><rect></rect>",1),ve=M("<stop></stop>"),be=M("<defs><linearGradient></linearGradient></defs><rect></rect>",1),ke=M('<rect y="0"></rect>'),we=M("<rect></rect>"),xe=M('<rect y="0"></rect>'),_e=M("<line></line>"),Se=M('<!><text fill="black"> </text>',1),ze=M('<text fill="black"> </text>'),Ve=M('<g class="legend-ticks"><!><!></g>'),Ae=M('<svg><g class="legend-inner"><!><!><!></g></svg>'),Le=wt('<div><div class="swatch-color svelte-1ioe3b8"></div> <span class="swatch-label svelte-1ioe3b8"> </span></div>'),Me=wt("<div></div>"),Oe=wt('<div class="legend-wrapper"><!> <!></div>');function Ce(s,n){ae(n,!1);const u=H(),l=H(),r=H(),i=H(),o=H(),W=H(),O=H();let c=d(n,"scale",8),Y=d(n,"title",8,void 0),y=d(n,"height",8,10),f=d(n,"ticks",8,5),et=d(n,"tickValues",8,void 0),v=d(n,"tickSize",8,14),A=d(n,"tickPosition",8,"bottom"),C=d(n,"tickMargin",8,5),ct=d(n,"tickTextAnchor",8,"auto"),Vt=d(n,"tickFormat",8,void 0),At=d(n,"tickLineWidth",8,1),Nt=d(n,"tickLineColor",24,()=>de.black),q=d(n,"margin",24,()=>({top:0,right:0,bottom:5,left:0})),Rt=d(n,"maxWidth",8,void 0),Wt=d(n,"swatch",8,!1),jt=d(n,"swatchLayout",8,"row"),Pt=d(n,"swatchAlign",8,"flex-start"),Tt=d(n,"swatchSize",8,16),Et=d(n,"swatchCircle",8,!1),Ht=d(n,"swatchSpacing",8,void 0),lt=d(n,"naFill",8,void 0),Xt=d(n,"naLabel",8,"NA"),ut=d(n,"naSize",8,16),ft=d(n,"naSpacing",8,16),Z=H(),pt=Ut(),$=H();function Bt(a,p){if(p){const k=a===void 0?D=>D:typeof a=="string"?Ct(a):a;return D=>k(p[D],D)}return typeof a=="string"?Ct(a):a&&!p?a:k=>k}function Jt(a,p,k){if(p==="continuous"){const D=Math.min(a.domain().length,a.range().length);return a.copy().rangeRound(ye(ce(0,k),D))}else return p==="sequential"?Object.assign(a.copy().interpolator(ue(0,k)),{range(){return[0,k]}}):p==="threshold"?fe().domain([-1,t(l).length-1]).rangeRound([0,k]):It().domain(a.domain()).rangeRound([0,k])}function Kt(a){return a.interpolate?"continuous":a.interpolator?"sequential":a.invertExtent?"threshold":"ordinal"}function Qt(a,p,k){if(et())return et();let D=p.domain();if(a==="sequential"&&!p.ticks){const gt=Math.round(f()+1);return zt(gt).map(X=>pe(D,X/(gt-1)))}else{if(a==="threshold")return zt(k.length);if(a==="ordinal")return D}return p.ticks(f())}function Ut(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function Yt(a,p){return ct()!=="auto"?ct():t(i)==="ordinal"||t($)?"middle":a===p[0]?"start":a===p[p.length-1]?"end":"middle"}Q(()=>R(c()),()=>{N(u,c().domain())}),Q(()=>R(c()),()=>{N(l,c().range())}),Q(()=>(R(lt()),t(Z),R(q()),R(ut()),R(ft())),()=>{N(r,lt()?t(Z)-q().left-q().right-ut()-ft():t(Z)-q().left-q().right)}),Q(()=>R(c()),()=>{N(i,Kt(c()))}),Q(()=>(R(c()),t(i),t(r)),()=>{N(o,Jt(c(),t(i),t(r)))}),Q(()=>(t(i),R(c())),()=>{t(i)==="threshold"?N($,c().thresholds?c().thresholds():c().quantiles?c().quantiles():c().domain()):N($,void 0)}),Q(()=>(R(Vt()),t($)),()=>{N(W,Bt(Vt(),t($)))}),Q(()=>(t(i),t(o),t($)),()=>{N(O,Qt(t(i),t(o),t($)))}),re(),oe();var yt=Oe();let Lt;var Mt=I(yt);{var Zt=a=>{var p=ge(),k=I(p);_(()=>kt(k,Y())),h(a,p)};G(Mt,a=>{Y()&&a(Zt)})}var $t=U(Mt,2);{var te=a=>{var p=_t(),k=it(p);{var D=X=>{var j=Ae(),st=I(j),mt=I(st);{var ht=b=>{var w=he(),P=it(w),nt=I(P);at(nt,5,()=>t(l),rt,(L,g,F)=>{var m=me();_(()=>{e(m,"offset",`${100/(t(l).length-1)*F}%`),e(m,"stop-color",t(g))}),h(L,m)});var z=U(P);_(()=>{e(nt,"id",pt),e(z,"fill",`url(#${pt??""})`),e(z,"width",t(r)),e(z,"height",y()),e(z,"y",A()==="bottom"?0:v()+C())}),h(b,w)},ot=(b,w)=>{{var P=z=>{var L=be(),g=it(L),F=I(g);at(F,5,()=>t(u),rt,(B,J,T)=>{var x=ve();_(E=>{e(x,"offset",`${100*(T/(t(u).length-1))}%`),e(x,"stop-color",E)},[()=>c()(t(J))],tt),h(B,x)});var m=U(g);_(()=>{e(F,"id",pt),e(m,"fill",`url(#${pt??""})`),e(m,"width",t(r)),e(m,"height",y()),e(m,"y",A()==="bottom"?0:v()+C())}),h(z,L)},nt=(z,L)=>{{var g=m=>{var B=_t(),J=it(B);at(J,1,()=>t(l),rt,(T,x,E)=>{var V=ke();_((S,K)=>{e(V,"x",S),e(V,"width",K),e(V,"height",y()),e(V,"fill",t(x))},[()=>t(o)(E-1),()=>t(o)(E)-t(o)(E-1)],tt),h(T,V)}),h(m,B)},F=(m,B)=>{{var J=T=>{var x=_t(),E=it(x);at(E,1,()=>t(u),rt,(V,S)=>{var K=we();_((ee,ne,ie)=>{e(K,"x",ee),e(K,"y",A()==="bottom"?0:v()+C()),e(K,"width",ne),e(K,"height",y()),e(K,"fill",ie)},[()=>t(o)(t(S)),()=>Math.max(0,t(o).bandwidth()-1),()=>c()(t(S))],tt),h(V,K)}),h(T,x)};G(m,T=>{t(i)==="ordinal"&&T(J)},B)}};G(z,m=>{t(i)==="threshold"?m(g):m(F,!1)},L)}};G(b,z=>{t(i)==="sequential"?z(P):z(nt,!1)},w)}};G(mt,b=>{t(i)==="continuous"?b(ht):b(ot,!1)})}var dt=U(mt);{var vt=b=>{var w=xe();_(()=>{e(w,"x",t(r)+q().left+ft()),e(w,"width",ut()),e(w,"height",y()),e(w,"fill",lt())}),h(b,w)};G(dt,b=>{lt()&&b(vt)})}var bt=U(dt);{var xt=b=>{var w=Ve(),P=I(w);at(P,1,()=>t(O),rt,(L,g)=>{var F=Se();const m=tt(()=>t(i)==="ordinal"?t(o)(t(g))+t(o).bandwidth()/2:t(o)(t(g))),B=tt(()=>A()==="top"?0:y()+C()+v());var J=it(F);{var T=V=>{var S=_e();_(()=>{e(S,"x1",t(m)),e(S,"x2",t(m)),e(S,"y1",A()==="bottom"?0:y()+C()+v()),e(S,"y2",A()==="bottom"?y()+C():v()),e(S,"stroke",Nt()),e(S,"stroke-width",At())}),h(V,S)};G(J,V=>{t(i)!=="ordinal"&&At()&&V(T)})}var x=U(J),E=I(x);_((V,S)=>{e(x,"alignment-baseline",A()==="top"?"hanging":"baseline"),e(x,"y",t(B)),e(x,"x",t(m)),e(x,"font-size",`${v()??""}px`),e(x,"text-anchor",V),kt(E,S)},[()=>Yt(t(g),t(u)),()=>t(W)(t(g))],tt),h(L,F)});var nt=U(P);{var z=L=>{var g=ze();e(g,"text-anchor","middle");var F=I(g);_(()=>{e(g,"alignment-baseline",A()==="top"?"hanging":"baseline"),e(g,"y",A()==="top"?0:y()+C()+v()),e(g,"x",t(r)+q().left+ft()+ut()/2),e(g,"font-size",`${v()??""}px`),kt(F,Xt())}),h(L,g)};G(nt,L=>{lt()&&L(z)})}h(b,w)};G(bt,b=>{t(i)&&t(Z)&&t(o)&&b(xt)})}_(()=>{e(j,"width",t(Z)),e(j,"height",y()+v()+C()+q().top+q().bottom),e(st,"transform",`translate(${q().left??""}, ${q().top??""})`)}),h(X,j)},gt=X=>{var j=Me();let st;at(j,5,()=>t(u),rt,(mt,ht)=>{var ot=Le();let dt;var vt=I(ot);let bt;var xt=U(vt,2),b=I(xt);_((w,P)=>{dt=Ot(ot,1,"swatch-item svelte-1ioe3b8",null,dt,w),bt=St(vt,"",bt,{"background-color":P}),kt(b,t(ht))},[()=>({"swatch-circle":Et()}),()=>c()(t(ht))],tt),h(mt,ot)}),_(()=>{Ot(j,1,`swatch-wrap swatch-layout-${jt()??""}`,"svelte-1ioe3b8"),st=St(j,"",st,{"--swatch-font-size":`${v()??""}px`,"--swatch-color-size":`${Tt()??""}px`,"--swatch-align":Pt(),"--swatch-spacing":Ht()})}),h(X,j)};G(k,X=>{t(i)==="ordinal"&&Wt()?X(gt,!1):X(D)})}h(a,p)};G($t,a=>{t(Z)&&a(te)})}_(()=>Lt=St(yt,"",Lt,{"max-width":`${Rt()??""}px`,"padding-bottom":"10px"})),se(yt,"clientWidth",a=>N(Z,a)),h(s,yt),le()}Ce.__docgen={data:[{name:"scale",visibility:"public",description:`D3 scale to base legend on
[scale]`,keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1},{name:"title",visibility:"public",description:`Optional title for the legend
[title = undefined]`,keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"height",visibility:"public",description:`Height of the visual element of the legend
[height = 20]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"10"},{name:"ticks",visibility:"public",description:`Optional number of ticks to pass to d3's generator
[ticks = 3]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"5"},{name:"tickValues",visibility:"public",description:`Optional array of exact values to use as ticks
[tickValues = undefined]`,keywords:[],kind:"let",type:{kind:"type",type:"array",text:"any[]"},static:!1,readonly:!1},{name:"tickSize",visibility:"public",description:`Optional size for tick labels
[ticksSize = 14]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"14"},{name:"tickPosition",visibility:"public",description:`Should ticks be positioned above or below the color bars?
[ticksPosition = "bottom"]`,keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"top",text:'"top"'},{kind:"const",type:"string",value:"bottom",text:'"bottom"'}],text:'"top" | "bottom"'},static:!1,readonly:!1,defaultValue:'"bottom"'},{name:"tickMargin",visibility:"public",description:`Optional size of space between color and tick labels
[ticksMargin = 6]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"5"},{name:"tickTextAnchor",visibility:"public",description:'Optionally set the `text-anchor` of all tick marks in the legend. If set to auto, tick marks use `text-anchor: middle` unless they represent the minumum or maximum value of the scale. Min value is set to `text-anchor: start` and max value is set to `text-anchor: end`.\n[tickTextAnchor = "auto"]',keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"auto",text:'"auto"'},{kind:"const",type:"string",value:"middle",text:'"middle"'},{kind:"const",type:"string",value:"start",text:'"start"'},{kind:"const",type:"string",value:"end",text:'"end"'}],text:'"auto" | "middle" | "start" | "end"'},static:!1,readonly:!1,defaultValue:'"auto"'},{name:"tickFormat",visibility:"public",description:`Optional tick formatting string or function
[tickFormat = undefined]`,keywords:[],kind:"let",type:{kind:"union",type:[{kind:"type",type:"string",text:"string"},{kind:"function",text:"(a: Object) => string"}],text:"string | (a: Object) => string"},static:!1,readonly:!1},{name:"tickLineWidth",visibility:"public",description:`Width of tick line. Set to 0 if no line is needed.
[tickLineWidth = 1]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"1"},{name:"tickLineColor",visibility:"public",description:`Color of tick line.
[tickLineColor = urbanColors.black]`,keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"margin",visibility:"public",description:"Optional margin object that defines space around legend within the SVG element",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ top: number; right: number; bottom: number; left: number; }"},static:!1,readonly:!1,defaultValue:`{
    top: 0,
    right: 0,
    bottom: 5,
    left: 0
  }`},{name:"maxWidth",visibility:"public",description:`Optional max width for the legend. Legend will resize to fill the space of the container by default.
[ maxWidth = undefined ]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1},{name:"swatch",visibility:"public",description:`Display ordinal scale as swatches rather than bars. Does nothing for other scale types.
[swatch = false]`,keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"swatchLayout",visibility:"public",description:`Display swatches in a row or column layout.
[swatchLayout = "row"]`,keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"row",text:'"row"'},{kind:"const",type:"string",value:"column",text:'"column"'}],text:'"row" | "column"'},static:!1,readonly:!1,defaultValue:'"row"'},{name:"swatchAlign",visibility:"public",description:`A flexbox alignment value for the swatch layout.
[swatchAlign = "flex-start"]`,keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"flex-start",text:'"flex-start"'},{kind:"const",type:"string",value:"center",text:'"center"'},{kind:"const",type:"string",value:"flex-end",text:'"flex-end"'}],text:'"flex-start" | "center" | "flex-end"'},static:!1,readonly:!1,defaultValue:'"flex-start"'},{name:"swatchSize",visibility:"public",description:`Size of swatch in pixels
[swatchSize = 16]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"16"},{name:"swatchCircle",visibility:"public",description:`Display swatches as circles rather than squares.
[swatchCircle = false]`,keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"swatchSpacing",visibility:"public",description:`Optional override space between swatch items. Should be a css compatable string.
[swatchSpacing = undefined]`,keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"naFill",visibility:"public",description:`Optional color to indicate for NA values
[naFill = undefined]`,keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"naLabel",visibility:"public",description:`Optional string label for NA values
[naLabel = "NA"]`,keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"NA"'},{name:"naSize",visibility:"public",description:`Optional size in pixels for naLabel
[naLabel = "NA"]`,keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"16"},{name:"naSpacing",visibility:"public",description:`Optional amount of spacing in pixels for NA swatch and label
[naSpacing = 16]`,keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"16"}],name:"ColorLegend.svelte"};export{Ce as C,Gt as o};

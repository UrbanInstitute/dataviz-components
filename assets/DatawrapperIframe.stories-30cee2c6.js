import{S as q,i as A,s as H,e as y,p as X,n as S,q as T,v as B,c as b,a as _,m as v,t as k,b as D,d as I}from"./index-e5bfe5ac.js";import{e as C,a as V,j as z,d as m,D as M,i as w,x as G,s as j,c as O,t as J,m as K,l as Q,q as U}from"./lifecycle-3957cd5d.js";import{g as P,a as Y}from"./spread-8a54911c.js";import{p as Z,T as N,S as $}from"./collect-stories-0fb31a36.js";typeof window<"u"&&typeof window.datawrapper>"u"&&(window.datawrapper={});let c={};typeof window<"u"&&(c=window.datawrapper);let f={};typeof window<"u"&&window.addEventListener("message",ee,!1);function ee(t){t.data&&t.data.source==="datawrapper"&&t.data.chartId&&f[t.data.type]&&f[t.data.type].forEach(function(e){typeof e=="function"&&e(t.data)})}c.on=function(t,e){if(typeof t!="string")throw new Error("event name must be a string");if(typeof e!="function")throw new Error("callback must be a function");return f[t]||(f[t]=[]),f[t].push(e),c};c.one=function(t,e){c.on(t,function i(){e.apply(null,arguments),c.off(t,i)})};c.off=function(t,e){if(f[t]){e||(f[t].length=0);var i=f[t].indexOf(e);return i>-1&&f[t].splice(i,1),c}};const te=c,ae=["bar.click","bar.mouseenter","bar.mouseleave","line.click","line.mouseenter","line.mouseleave","area.click","area.mouseenter","area.mouseleave","tooltip","highlight.set","highlight.clear","column:change","region.click","region.mouseenter","region.mouseleave","symbol.click","symbol.mouseenter","symbol.mouseleave","hash.changed","download","social-sharing.click","embed.modal.open","embed.modal.close","embed.copy","source.click"];function re(t){let e,i,n,d=[{title:t[0]},{"aria-label":t[1]},{id:i="datawrapper-chart-"+t[2]},{src:n="https://datawrapper.dwcdn.net/"+t[2]},{scrolling:t[3]},{frameborder:t[4]},{style:t[6]},{height:t[5]},{"data-external":"1"},t[7]],a={};for(let r=0;r<d.length;r+=1)a=y(a,d[r]);return{c(){e=C("iframe"),this.h()},l(r){e=V(r,"IFRAME",{title:!0,"aria-label":!0,id:!0,src:!0,scrolling:!0,frameborder:!0,style:!0,height:!0,"data-external":!0}),z(e).forEach(m),this.h()},h(){M(e,a)},m(r,s){w(r,e,s)},p(r,[s]){M(e,a=P(d,[s&1&&{title:r[0]},s&2&&{"aria-label":r[1]},s&4&&i!==(i="datawrapper-chart-"+r[2])&&{id:i},s&4&&!X(e.src,n="https://datawrapper.dwcdn.net/"+r[2])&&{src:n},s&8&&{scrolling:r[3]},s&16&&{frameborder:r[4]},s&64&&{style:r[6]},s&32&&{height:r[5]},{"data-external":"1"},s&128&&r[7]]))},i:S,o:S,d(r){r&&m(e)}}}function ie(t,e,i){const n=["title","ariaLabel","datawrapperId","scrolling","frameborder","height","style"];let d=T(e,n),{title:a}=e,{ariaLabel:r}=e,{datawrapperId:s}=e,{scrolling:o="no"}=e,{frameborder:p="0"}=e,{height:g="500"}=e,{style:L="width: 0; min-width: 100% !important; border: none;"}=e;const x=G();return ae.forEach(l=>{te.on(l,u=>{x(l.replace(".",""),u)})}),typeof window<"u"&&window.addEventListener("message",function(l){if(l.data["datawrapper-height"]!==void 0){var u=document.querySelectorAll("iframe");for(var F in l.data["datawrapper-height"])for(var h=0;h<u.length;h++)if(u[h].contentWindow===l.source){var W=l.data["datawrapper-height"][F]+"px";u[h].style.height=W}}}),t.$$set=l=>{e=y(y({},e),B(l)),i(7,d=T(e,n)),"title"in l&&i(0,a=l.title),"ariaLabel"in l&&i(1,r=l.ariaLabel),"datawrapperId"in l&&i(2,s=l.datawrapperId),"scrolling"in l&&i(3,o=l.scrolling),"frameborder"in l&&i(4,p=l.frameborder),"height"in l&&i(5,g=l.height),"style"in l&&i(6,L=l.style)},[a,r,s,o,p,g,L,d]}class E extends q{constructor(e){super(),A(this,e,ie,re,H,{title:0,ariaLabel:1,datawrapperId:2,scrolling:3,frameborder:4,height:5,style:6})}}E.__docgen={version:3,name:"DatawrapperIframe.svelte",data:[{keywords:[{name:"type",description:"{string} HTML title of the iframe"}],visibility:"public",description:"*",name:"title",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"}},{keywords:[{name:"type",description:"{string} HTML aria-label of the iframe"}],visibility:"public",description:"*",name:"ariaLabel",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"}},{keywords:[{name:"type",description:"{string} Datawrapper chart ID"}],visibility:"public",description:"*",name:"datawrapperId",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"}},{keywords:[{name:"type",description:"{string} iframe scrolling attribute"}],visibility:"public",description:"*",name:"scrolling",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:"no"},{keywords:[{name:"type",description:"{string} iframe frameborder attribute"}],visibility:"public",description:"*",name:"frameborder",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:"0"},{keywords:[{name:"type",description:"{string} iframe height attribute (placeholder since reactivity is enabled)"}],visibility:"public",description:"*",name:"height",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:"500"},{keywords:[{name:"type",description:"{string} CSS styles of the iframe"}],visibility:"public",description:"*",name:"style",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:"width: 0; min-width: 100% !important; border: none;"}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[]}],slots:[],refs:[]};function ne(t){let e,i,n,d,a;const r=[t[4]];let s={};for(let o=0;o<r.length;o+=1)s=y(s,r[o]);return e=new E({props:s}),e.$on("regionclick",t[1]),e.$on("regionmouseenter",t[2]),e.$on("regionmouseleave",t[3]),{c(){b(e.$$.fragment),i=j(),n=C("p"),d=J(t[0])},l(o){_(e.$$.fragment,o),i=O(o),n=V(o,"P",{});var p=z(n);d=K(p,t[0]),p.forEach(m)},m(o,p){v(e,o,p),w(o,i,p),w(o,n,p),Q(n,d),a=!0},p(o,p){const g=p&16?P(r,[Y(o[4])]):{};e.$set(g),(!a||p&1)&&U(d,o[0])},i(o){a||(k(e.$$.fragment,o),a=!0)},o(o){D(e.$$.fragment,o),a=!1},d(o){o&&(m(i),m(n)),I(e,o)}}}function se(t){let e,i,n,d;return e=new N({props:{$$slots:{default:[ne,({args:a})=>({4:a}),({args:a})=>a?16:0]},$$scope:{ctx:t}}}),n=new $({props:{name:"Default",args:{title:"This is a title for the visualization",ariaLabel:"This is an accessible title for the visualization",datawrapperId:"RMnkX"}}}),{c(){b(e.$$.fragment),i=j(),b(n.$$.fragment)},l(a){_(e.$$.fragment,a),i=O(a),_(n.$$.fragment,a)},m(a,r){v(e,a,r),w(a,i,r),v(n,a,r),d=!0},p(a,[r]){const s={};r&49&&(s.$$scope={dirty:r,ctx:a}),e.$set(s)},i(a){d||(k(e.$$.fragment,a),k(n.$$.fragment,a),d=!0)},o(a){D(e.$$.fragment,a),D(n.$$.fragment,a),d=!1},d(a){a&&m(i),I(e,a),I(n,a)}}}const oe={title:"Components/DatawrapperIframe",description:"Datawrapper iframe",component:E,tags:["autodocs"],parameters:{docs:{description:{component:"Datawrapper iframe with <a href='https://developer.datawrapper.de/docs/listening-to-chart-interaction-events' target='_blank'>event dispatching</a> enabled. All interaction events are accessible via <code>on:eventname</code> (<b>no periods</b>) on the `DatawrapperIframe` Svelte component itself.<br/><br/>The complete event list and associated descriptions can be found <a href='https://developer.datawrapper.de/docs/listening-to-chart-interaction-events#visualization-events' target='_blank'>here</a>."}}}};function le(t,e,i){let n;const d=s=>i(0,n=s.detail.data.fips),a=s=>i(0,n=s.detail.data.fips),r=()=>i(0,n="Hover over a region to change this text");return i(0,n="Hover over a region to change this text"),[n,d,a,r]}class de extends q{constructor(e){super(),A(this,e,le,se,H,{})}}const R=Z(de,{meta:{title:"Components/DatawrapperIframe",tags:["autodocs"]},stories:{"tpl:default":{name:"default",template:!0,source:`<DatawrapperIframe
  {...args}
  on:regionclick={(e) => (test = e.detail.data.fips)}
  on:regionmouseenter={(e) => (test = e.detail.data.fips)}
  on:regionmouseleave={() => (test = "Hover over a region to change this text")}
/>
<p>{test}</p>`,hasArgs:!0},Default:{name:"Default",template:!1,source:"",hasArgs:!1}},allocatedIds:["default","Story","Template"]},oe),ue=R.meta,ge=["Default"],he=R.stories.Default;export{he as Default,ge as __namedExportsOrder,ue as default};

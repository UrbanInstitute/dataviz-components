import{S as ri,i as oi,s as li,n as ye,r as ui,k as mn,q as si,y as ur,u as ai,v as fi,w as ci,t as ft,b as _t,j as _e,l as Ln,c as hi,a as pi,m as di,d as mi,h as we,F as Pn,e as sr}from"./index-lamZ5WrB.js";import{e as Mt,s as Kt,p as bt,a as Tt,b as et,c as Qt,q as zt,d as Q,j as A,i as tn,k as j,w as St,h as gi,f as Se,K as ar,A as fr,v as cr,x as hr}from"./lifecycle-BNS46k4e.js";import{r as vi,w as Nn}from"./collect-stories-D1soPxiK.js";import{i as Et,a as ke,b as Ee,d as pr}from"./string-3NetaFjT.js";import{T as dr}from"./Tooltip-BmgvXhKp.js";const yi="(prefers-reduced-motion: reduce)",mr=()=>{if(typeof window<"u")return window.matchMedia(yi).matches},gr=vi(mr(),t=>{const n=e=>{t(e.matches)};if(typeof window<"u"){const e=window.matchMedia(yi);return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}}});class At{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=e[r],l=n+o,u=Math.abs(n)<Math.abs(o)?n-(l-o):o-(l-n);u&&(e[i++]=u),n=l}return e[i]=n,this._n=i+1,this}valueOf(){const n=this._partials;let e=this._n,i,r,o,l=0;if(e>0){for(l=n[--e];e>0&&(i=l,r=n[--e],l=i+r,o=r-(l-i),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(r=o*2,i=l+r,r==i-l&&(l=i))}return l}}function*vr(t){for(const n of t)yield*n}function _i(t){return Array.from(vr(t))}var F=1e-6,yr=1e-12,O=Math.PI,rt=O/2,be=O/4,lt=O*2,J=180/O,W=O/180,Y=Math.abs,_r=Math.atan,Vt=Math.atan2,U=Math.cos,Es=Math.exp,bs=Math.log,q=Math.sin,an=Math.sign||function(t){return t>0?1:t<0?-1:0},vt=Math.sqrt,zs=Math.tan;function wr(t){return t>1?0:t<-1?O:Math.acos(t)}function Rt(t){return t>1?rt:t<-1?-rt:Math.asin(t)}function ot(){}function gn(t,n){t&&Me.hasOwnProperty(t.type)&&Me[t.type](t,n)}var ze={Feature:function(t,n){gn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,r=e.length;++i<r;)gn(e[i].geometry,n)}},Me={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)t=e[i],n.point(t[0],t[1],t[2])},LineString:function(t,n){Zn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)Zn(e[i],n,0)},Polygon:function(t,n){Te(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)Te(e[i],n)},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,r=e.length;++i<r;)gn(e[i],n)}};function Zn(t,n,e){var i=-1,r=t.length-e,o;for(n.lineStart();++i<r;)o=t[i],n.point(o[0],o[1],o[2]);n.lineEnd()}function Te(t,n){var e=-1,i=t.length;for(n.polygonStart();++e<i;)Zn(t[e],n,1);n.polygonEnd()}function Nt(t,n){t&&ze.hasOwnProperty(t.type)?ze[t.type](t,n):gn(t,n)}function xn(t){return[Vt(t[1],t[0]),Rt(t[2])]}function Dt(t){var n=t[0],e=t[1],i=U(e);return[i*U(n),i*q(n),q(e)]}function en(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function vn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function In(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function rn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Bn(t){var n=vt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Xn(t,n){function e(i,r){return i=t(i,r),n(i[0],i[1])}return t.invert&&n.invert&&(e.invert=function(i,r){return i=n.invert(i,r),i&&t.invert(i[0],i[1])}),e}function qn(t,n){return Y(t)>O&&(t-=Math.round(t/lt)*lt),[t,n]}qn.invert=qn;function wi(t,n,e){return(t%=lt)?n||e?Xn(Re(t),Ce(n,e)):Re(t):n||e?Ce(n,e):qn}function Ae(t){return function(n,e){return n+=t,Y(n)>O&&(n-=Math.round(n/lt)*lt),[n,e]}}function Re(t){var n=Ae(t);return n.invert=Ae(-t),n}function Ce(t,n){var e=U(t),i=q(t),r=U(n),o=q(n);function l(u,f){var a=U(f),s=U(u)*a,h=q(u)*a,c=q(f),p=c*e+s*i;return[Vt(h*r-p*o,s*e-c*i),Rt(p*r+h*o)]}return l.invert=function(u,f){var a=U(f),s=U(u)*a,h=q(u)*a,c=q(f),p=c*r-h*o;return[Vt(h*r+c*o,s*e+p*i),Rt(p*e-s*i)]},l}function Ms(t){t=wi(t[0]*W,t[1]*W,t.length>2?t[2]*W:0);function n(e){return e=t(e[0]*W,e[1]*W),e[0]*=J,e[1]*=J,e}return n.invert=function(e){return e=t.invert(e[0]*W,e[1]*W),e[0]*=J,e[1]*=J,e},n}function Sr(t,n,e,i,r,o){if(e){var l=U(n),u=q(n),f=i*e;r==null?(r=n+i*lt,o=n-f/2):(r=Le(l,r),o=Le(l,o),(i>0?r<o:r>o)&&(r+=i*lt));for(var a,s=r;i>0?s>o:s<o;s-=f)a=xn([l,-u*U(s),-u*q(s)]),t.point(a[0],a[1])}}function Le(t,n){n=Dt(n),n[0]-=t,Bn(n);var e=wr(-n[1]);return((-n[2]<0?-e:e)+lt-F)%lt}function Si(){var t=[],n;return{point:function(e,i,r){n.push([e,i,r])},lineStart:function(){t.push(n=[])},lineEnd:ot,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function fn(t,n){return Y(t[0]-n[0])<F&&Y(t[1]-n[1])<F}function on(t,n,e,i){this.x=t,this.z=n,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function ki(t,n,e,i,r){var o=[],l=[],u,f;if(t.forEach(function(g){if(!((_=g.length-1)<=0)){var _,w=g[0],y=g[_],S;if(fn(w,y)){if(!w[2]&&!y[2]){for(r.lineStart(),u=0;u<_;++u)r.point((w=g[u])[0],w[1]);r.lineEnd();return}y[0]+=2*F}o.push(S=new on(w,g,null,!0)),l.push(S.o=new on(w,null,S,!1)),o.push(S=new on(y,g,null,!1)),l.push(S.o=new on(y,null,S,!0))}}),!!o.length){for(l.sort(n),Pe(o),Pe(l),u=0,f=l.length;u<f;++u)l[u].e=e=!e;for(var a=o[0],s,h;;){for(var c=a,p=!0;c.v;)if((c=c.n)===a)return;s=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(p)for(u=0,f=s.length;u<f;++u)r.point((h=s[u])[0],h[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(p)for(s=c.p.z,u=s.length-1;u>=0;--u)r.point((h=s[u])[0],h[1]);else i(c.x,c.p.x,-1,r);c=c.p}c=c.o,s=c.z,p=!p}while(!c.v);r.lineEnd()}}}function Pe(t){if(n=t.length){for(var n,e=0,i=t[0],r;++e<n;)i.n=r=t[e],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Vn(t){return Y(t[0])<=O?t[0]:an(t[0])*((Y(t[0])+O)%lt-O)}function kr(t,n){var e=Vn(n),i=n[1],r=q(i),o=[q(e),-U(e),0],l=0,u=0,f=new At;r===1?i=rt+F:r===-1&&(i=-rt-F);for(var a=0,s=t.length;a<s;++a)if(c=(h=t[a]).length)for(var h,c,p=h[c-1],g=Vn(p),_=p[1]/2+be,w=q(_),y=U(_),S=0;S<c;++S,g=b,w=T,y=V,p=k){var k=h[S],b=Vn(k),z=k[1]/2+be,T=q(z),V=U(z),N=b-g,I=N>=0?1:-1,Z=I*N,L=Z>O,H=w*T;if(f.add(Vt(H*I*q(Z),y*V+H*U(Z))),l+=L?N+I*lt:N,L^g>=e^b>=e){var x=vn(Dt(p),Dt(k));Bn(x);var d=vn(o,x);Bn(d);var m=(L^N>=0?-1:1)*Rt(d[2]);(i>m||i===m&&(x[0]||x[1]))&&(u+=L^N>=0?1:-1)}}return(l<-F||l<F&&f<-yr)^u&1}function Ei(t,n,e,i){return function(r){var o=n(r),l=Si(),u=n(l),f=!1,a,s,h,c={point:p,lineStart:_,lineEnd:w,polygonStart:function(){c.point=y,c.lineStart=S,c.lineEnd=k,s=[],a=[]},polygonEnd:function(){c.point=p,c.lineStart=_,c.lineEnd=w,s=_i(s);var b=kr(a,i);s.length?(f||(r.polygonStart(),f=!0),ki(s,br,b,e,r)):b&&(f||(r.polygonStart(),f=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),s=a=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(b,z){t(b,z)&&r.point(b,z)}function g(b,z){o.point(b,z)}function _(){c.point=g,o.lineStart()}function w(){c.point=p,o.lineEnd()}function y(b,z){h.push([b,z]),u.point(b,z)}function S(){u.lineStart(),h=[]}function k(){y(h[0][0],h[0][1]),u.lineEnd();var b=u.clean(),z=l.result(),T,V=z.length,N,I,Z;if(h.pop(),a.push(h),h=null,!!V){if(b&1){if(I=z[0],(N=I.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),T=0;T<N;++T)r.point((Z=I[T])[0],Z[1]);r.lineEnd()}return}V>1&&b&2&&z.push(z.pop().concat(z.shift())),s.push(z.filter(Er))}}return c}}function Er(t){return t.length>1}function br(t,n){return((t=t.x)[0]<0?t[1]-rt-F:rt-t[1])-((n=n.x)[0]<0?n[1]-rt-F:rt-n[1])}const Ne=Ei(function(){return!0},zr,Tr,[-O,-rt]);function zr(t){var n=NaN,e=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,l){var u=o>0?O:-O,f=Y(o-n);Y(f-O)<F?(t.point(n,e=(e+l)/2>0?rt:-rt),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(u,e),t.point(o,e),r=0):i!==u&&f>=O&&(Y(n-i)<F&&(n-=i*F),Y(o-u)<F&&(o-=u*F),e=Mr(n,e,o,l),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(u,e),r=0),t.point(n=o,e=l),i=u},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-r}}}function Mr(t,n,e,i){var r,o,l=q(t-e);return Y(l)>F?_r((q(n)*(o=U(i))*q(e)-q(i)*(r=U(n))*q(t))/(r*o*l)):(n+i)/2}function Tr(t,n,e,i){var r;if(t==null)r=e*rt,i.point(-O,r),i.point(0,r),i.point(O,r),i.point(O,0),i.point(O,-r),i.point(0,-r),i.point(-O,-r),i.point(-O,0),i.point(-O,r);else if(Y(t[0]-n[0])>F){var o=t[0]<n[0]?O:-O;r=e*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(n[0],n[1])}function Ar(t){var n=U(t),e=2*W,i=n>0,r=Y(n)>F;function o(s,h,c,p){Sr(p,t,e,c,s,h)}function l(s,h){return U(s)*U(h)>n}function u(s){var h,c,p,g,_;return{lineStart:function(){g=p=!1,_=1},point:function(w,y){var S=[w,y],k,b=l(w,y),z=i?b?0:a(w,y):b?a(w+(w<0?O:-O),y):0;if(!h&&(g=p=b)&&s.lineStart(),b!==p&&(k=f(h,S),(!k||fn(h,k)||fn(S,k))&&(S[2]=1)),b!==p)_=0,b?(s.lineStart(),k=f(S,h),s.point(k[0],k[1])):(k=f(h,S),s.point(k[0],k[1],2),s.lineEnd()),h=k;else if(r&&h&&i^b){var T;!(z&c)&&(T=f(S,h,!0))&&(_=0,i?(s.lineStart(),s.point(T[0][0],T[0][1]),s.point(T[1][0],T[1][1]),s.lineEnd()):(s.point(T[1][0],T[1][1]),s.lineEnd(),s.lineStart(),s.point(T[0][0],T[0][1],3)))}b&&(!h||!fn(h,S))&&s.point(S[0],S[1]),h=S,p=b,c=z},lineEnd:function(){p&&s.lineEnd(),h=null},clean:function(){return _|(g&&p)<<1}}}function f(s,h,c){var p=Dt(s),g=Dt(h),_=[1,0,0],w=vn(p,g),y=en(w,w),S=w[0],k=y-S*S;if(!k)return!c&&s;var b=n*y/k,z=-n*S/k,T=vn(_,w),V=rn(_,b),N=rn(w,z);In(V,N);var I=T,Z=en(V,I),L=en(I,I),H=Z*Z-L*(en(V,V)-1);if(!(H<0)){var x=vt(H),d=rn(I,(-Z-x)/L);if(In(d,V),d=xn(d),!c)return d;var m=s[0],v=h[0],E=s[1],M=h[1],R;v<m&&(R=m,m=v,v=R);var P=v-m,D=Y(P-O)<F,B=D||P<F;if(!D&&M<E&&(R=E,E=M,M=R),B?D?E+M>0^d[1]<(Y(d[0]-m)<F?E:M):E<=d[1]&&d[1]<=M:P>O^(m<=d[0]&&d[0]<=v)){var G=rn(I,(-Z+x)/L);return In(G,V),[d,xn(G)]}}}function a(s,h){var c=i?t:O-t,p=0;return s<-c?p|=1:s>c&&(p|=2),h<-c?p|=4:h>c&&(p|=8),p}return Ei(l,u,o,i?[0,-t]:[-O,t-O])}function Rr(t,n,e,i,r,o){var l=t[0],u=t[1],f=n[0],a=n[1],s=0,h=1,c=f-l,p=a-u,g;if(g=e-l,!(!c&&g>0)){if(g/=c,c<0){if(g<s)return;g<h&&(h=g)}else if(c>0){if(g>h)return;g>s&&(s=g)}if(g=r-l,!(!c&&g<0)){if(g/=c,c<0){if(g>h)return;g>s&&(s=g)}else if(c>0){if(g<s)return;g<h&&(h=g)}if(g=i-u,!(!p&&g>0)){if(g/=p,p<0){if(g<s)return;g<h&&(h=g)}else if(p>0){if(g>h)return;g>s&&(s=g)}if(g=o-u,!(!p&&g<0)){if(g/=p,p<0){if(g>h)return;g>s&&(s=g)}else if(p>0){if(g<s)return;g<h&&(h=g)}return s>0&&(t[0]=l+s*c,t[1]=u+s*p),h<1&&(n[0]=l+h*c,n[1]=u+h*p),!0}}}}}var Xt=1e9,ln=-Xt;function Cr(t,n,e,i){function r(a,s){return t<=a&&a<=e&&n<=s&&s<=i}function o(a,s,h,c){var p=0,g=0;if(a==null||(p=l(a,h))!==(g=l(s,h))||f(a,s)<0^h>0)do c.point(p===0||p===3?t:e,p>1?i:n);while((p=(p+h+4)%4)!==g);else c.point(s[0],s[1])}function l(a,s){return Y(a[0]-t)<F?s>0?0:3:Y(a[0]-e)<F?s>0?2:1:Y(a[1]-n)<F?s>0?1:0:s>0?3:2}function u(a,s){return f(a.x,s.x)}function f(a,s){var h=l(a,1),c=l(s,1);return h!==c?h-c:h===0?s[1]-a[1]:h===1?a[0]-s[0]:h===2?a[1]-s[1]:s[0]-a[0]}return function(a){var s=a,h=Si(),c,p,g,_,w,y,S,k,b,z,T,V={point:N,lineStart:H,lineEnd:x,polygonStart:Z,polygonEnd:L};function N(m,v){r(m,v)&&s.point(m,v)}function I(){for(var m=0,v=0,E=p.length;v<E;++v)for(var M=p[v],R=1,P=M.length,D=M[0],B,G,X=D[0],K=D[1];R<P;++R)B=X,G=K,D=M[R],X=D[0],K=D[1],G<=i?K>i&&(X-B)*(i-G)>(K-G)*(t-B)&&++m:K<=i&&(X-B)*(i-G)<(K-G)*(t-B)&&--m;return m}function Z(){s=h,c=[],p=[],T=!0}function L(){var m=I(),v=T&&m,E=(c=_i(c)).length;(v||E)&&(a.polygonStart(),v&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),E&&ki(c,u,m,o,a),a.polygonEnd()),s=a,c=p=g=null}function H(){V.point=d,p&&p.push(g=[]),z=!0,b=!1,S=k=NaN}function x(){c&&(d(_,w),y&&b&&h.rejoin(),c.push(h.result())),V.point=N,b&&s.lineEnd()}function d(m,v){var E=r(m,v);if(p&&g.push([m,v]),z)_=m,w=v,y=E,z=!1,E&&(s.lineStart(),s.point(m,v));else if(E&&b)s.point(m,v);else{var M=[S=Math.max(ln,Math.min(Xt,S)),k=Math.max(ln,Math.min(Xt,k))],R=[m=Math.max(ln,Math.min(Xt,m)),v=Math.max(ln,Math.min(Xt,v))];Rr(M,R,t,n,e,i)?(b||(s.lineStart(),s.point(M[0],M[1])),s.point(R[0],R[1]),E||s.lineEnd(),T=!1):E&&(s.lineStart(),s.point(m,v),T=!1)}S=m,k=v,b=E}return V}}const Hn=t=>t;var Dn=new At,Yn=new At,bi,zi,Un,Gn,mt={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){mt.lineStart=Lr,mt.lineEnd=Nr},polygonEnd:function(){mt.lineStart=mt.lineEnd=mt.point=ot,Dn.add(Y(Yn)),Yn=new At},result:function(){var t=Dn/2;return Dn=new At,t}};function Lr(){mt.point=Pr}function Pr(t,n){mt.point=Mi,bi=Un=t,zi=Gn=n}function Mi(t,n){Yn.add(Gn*t-Un*n),Un=t,Gn=n}function Nr(){Mi(bi,zi)}var Ot=1/0,yn=Ot,Jt=-Ot,_n=Jt,wn={point:Ir,lineStart:ot,lineEnd:ot,polygonStart:ot,polygonEnd:ot,result:function(){var t=[[Ot,yn],[Jt,_n]];return Jt=_n=-(yn=Ot=1/0),t}};function Ir(t,n){t<Ot&&(Ot=t),t>Jt&&(Jt=t),n<yn&&(yn=n),n>_n&&(_n=n)}var Wn=0,Kn=0,qt=0,Sn=0,kn=0,It=0,Qn=0,Jn=0,Ht=0,Ti,Ai,ct,ht,it={point:Ct,lineStart:Ie,lineEnd:Ve,polygonStart:function(){it.lineStart=Or,it.lineEnd=Fr},polygonEnd:function(){it.point=Ct,it.lineStart=Ie,it.lineEnd=Ve},result:function(){var t=Ht?[Qn/Ht,Jn/Ht]:It?[Sn/It,kn/It]:qt?[Wn/qt,Kn/qt]:[NaN,NaN];return Wn=Kn=qt=Sn=kn=It=Qn=Jn=Ht=0,t}};function Ct(t,n){Wn+=t,Kn+=n,++qt}function Ie(){it.point=Vr}function Vr(t,n){it.point=Dr,Ct(ct=t,ht=n)}function Dr(t,n){var e=t-ct,i=n-ht,r=vt(e*e+i*i);Sn+=r*(ct+t)/2,kn+=r*(ht+n)/2,It+=r,Ct(ct=t,ht=n)}function Ve(){it.point=Ct}function Or(){it.point=Zr}function Fr(){Ri(Ti,Ai)}function Zr(t,n){it.point=Ri,Ct(Ti=ct=t,Ai=ht=n)}function Ri(t,n){var e=t-ct,i=n-ht,r=vt(e*e+i*i);Sn+=r*(ct+t)/2,kn+=r*(ht+n)/2,It+=r,r=ht*t-ct*n,Qn+=r*(ct+t),Jn+=r*(ht+n),Ht+=r*3,Ct(ct=t,ht=n)}function Ci(t){this._context=t}Ci.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,lt);break}}},result:ot};var jn=new At,On,Li,Pi,Yt,Ut,jt={point:ot,lineStart:function(){jt.point=xr},lineEnd:function(){On&&Ni(Li,Pi),jt.point=ot},polygonStart:function(){On=!0},polygonEnd:function(){On=null},result:function(){var t=+jn;return jn=new At,t}};function xr(t,n){jt.point=Ni,Li=Yt=t,Pi=Ut=n}function Ni(t,n){Yt-=t,Ut-=n,jn.add(vt(Yt*Yt+Ut*Ut)),Yt=t,Ut=n}let De,En,Oe,Fe;class Ze{constructor(n){this._append=n==null?Ii:Br(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==Oe||this._append!==En){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Oe=i,En=this._append,Fe=this._,this._=r}this._+=Fe;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Ii(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Br(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Ii;if(n!==De){const e=10**n;De=n,En=function(r){let o=1;this._+=r[0];for(const l=r.length;o<l;++o)this._+=Math.round(arguments[o]*e)/e+r[o]}}return En}function Ts(t,n){let e=3,i=4.5,r,o;function l(u){return u&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Nt(u,r(o))),o.result()}return l.area=function(u){return Nt(u,r(mt)),mt.result()},l.measure=function(u){return Nt(u,r(jt)),jt.result()},l.bounds=function(u){return Nt(u,r(wn)),wn.result()},l.centroid=function(u){return Nt(u,r(it)),it.result()},l.projection=function(u){return arguments.length?(r=u==null?(t=null,Hn):(t=u).stream,l):t},l.context=function(u){return arguments.length?(o=u==null?(n=null,new Ze(e)):new Ci(n=u),typeof i!="function"&&o.pointRadius(i),l):n},l.pointRadius=function(u){return arguments.length?(i=typeof u=="function"?u:(o.pointRadius(+u),+u),l):i},l.digits=function(u){if(!arguments.length)return e;if(u==null)e=null;else{const f=Math.floor(u);if(!(f>=0))throw new RangeError(`invalid digits: ${u}`);e=f}return n===null&&(o=new Ze(e)),l},l.projection(t).digits(e).context(n)}function ae(t){return function(n){var e=new $n;for(var i in t)e[i]=t[i];return e.stream=n,e}}function $n(){}$n.prototype={constructor:$n,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fe(t,n,e){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Nt(e,t.stream(wn)),n(wn.result()),i!=null&&t.clipExtent(i),t}function ce(t,n,e){return fe(t,function(i){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],l=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),u=+n[0][0]+(r-l*(i[1][0]+i[0][0]))/2,f=+n[0][1]+(o-l*(i[1][1]+i[0][1]))/2;t.scale(150*l).translate([u,f])},e)}function Vi(t,n,e){return ce(t,[[0,0],n],e)}function Di(t,n,e){return fe(t,function(i){var r=+n,o=r/(i[1][0]-i[0][0]),l=(r-o*(i[1][0]+i[0][0]))/2,u=-o*i[0][1];t.scale(150*o).translate([l,u])},e)}function Oi(t,n,e){return fe(t,function(i){var r=+n,o=r/(i[1][1]-i[0][1]),l=-o*i[0][0],u=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([l,u])},e)}var xe=16,Xr=U(30*W);function Be(t,n){return+n?Hr(t,n):qr(t)}function qr(t){return ae({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function Hr(t,n){function e(i,r,o,l,u,f,a,s,h,c,p,g,_,w){var y=a-i,S=s-r,k=y*y+S*S;if(k>4*n&&_--){var b=l+c,z=u+p,T=f+g,V=vt(b*b+z*z+T*T),N=Rt(T/=V),I=Y(Y(T)-1)<F||Y(o-h)<F?(o+h)/2:Vt(z,b),Z=t(I,N),L=Z[0],H=Z[1],x=L-i,d=H-r,m=S*x-y*d;(m*m/k>n||Y((y*x+S*d)/k-.5)>.3||l*c+u*p+f*g<Xr)&&(e(i,r,o,l,u,f,L,H,I,b/=V,z/=V,T,_,w),w.point(L,H),e(L,H,I,b,z,T,a,s,h,c,p,g,_,w))}}return function(i){var r,o,l,u,f,a,s,h,c,p,g,_,w={point:y,lineStart:S,lineEnd:b,polygonStart:function(){i.polygonStart(),w.lineStart=z},polygonEnd:function(){i.polygonEnd(),w.lineStart=S}};function y(N,I){N=t(N,I),i.point(N[0],N[1])}function S(){h=NaN,w.point=k,i.lineStart()}function k(N,I){var Z=Dt([N,I]),L=t(N,I);e(h,c,s,p,g,_,h=L[0],c=L[1],s=N,p=Z[0],g=Z[1],_=Z[2],xe,i),i.point(h,c)}function b(){w.point=y,i.lineEnd()}function z(){S(),w.point=T,w.lineEnd=V}function T(N,I){k(r=N,I),o=h,l=c,u=p,f=g,a=_,w.point=k}function V(){e(h,c,s,p,g,_,o,l,r,u,f,a,xe,i),w.lineEnd=b,b()}return w}}var Yr=ae({point:function(t,n){this.stream.point(t*W,n*W)}});function Ur(t){return ae({point:function(n,e){var i=t(n,e);return this.stream.point(i[0],i[1])}})}function Gr(t,n,e,i,r){function o(l,u){return l*=i,u*=r,[n+t*l,e-t*u]}return o.invert=function(l,u){return[(l-n)/t*i,(e-u)/t*r]},o}function Xe(t,n,e,i,r,o){if(!o)return Gr(t,n,e,i,r);var l=U(o),u=q(o),f=l*t,a=u*t,s=l/t,h=u/t,c=(u*e-l*n)/t,p=(u*n+l*e)/t;function g(_,w){return _*=i,w*=r,[f*_-a*w+n,e-a*_-f*w]}return g.invert=function(_,w){return[i*(s*_-h*w+c),r*(p-h*_-s*w)]},g}function As(t){return Fi(function(){return t})()}function Fi(t){var n,e=150,i=480,r=250,o=0,l=0,u=0,f=0,a=0,s,h=0,c=1,p=1,g=null,_=Ne,w=null,y,S,k,b=Hn,z=.5,T,V,N,I,Z;function L(m){return N(m[0]*W,m[1]*W)}function H(m){return m=N.invert(m[0],m[1]),m&&[m[0]*J,m[1]*J]}L.stream=function(m){return I&&Z===m?I:I=Yr(Ur(s)(_(T(b(Z=m)))))},L.preclip=function(m){return arguments.length?(_=m,g=void 0,d()):_},L.postclip=function(m){return arguments.length?(b=m,w=y=S=k=null,d()):b},L.clipAngle=function(m){return arguments.length?(_=+m?Ar(g=m*W):(g=null,Ne),d()):g*J},L.clipExtent=function(m){return arguments.length?(b=m==null?(w=y=S=k=null,Hn):Cr(w=+m[0][0],y=+m[0][1],S=+m[1][0],k=+m[1][1]),d()):w==null?null:[[w,y],[S,k]]},L.scale=function(m){return arguments.length?(e=+m,x()):e},L.translate=function(m){return arguments.length?(i=+m[0],r=+m[1],x()):[i,r]},L.center=function(m){return arguments.length?(o=m[0]%360*W,l=m[1]%360*W,x()):[o*J,l*J]},L.rotate=function(m){return arguments.length?(u=m[0]%360*W,f=m[1]%360*W,a=m.length>2?m[2]%360*W:0,x()):[u*J,f*J,a*J]},L.angle=function(m){return arguments.length?(h=m%360*W,x()):h*J},L.reflectX=function(m){return arguments.length?(c=m?-1:1,x()):c<0},L.reflectY=function(m){return arguments.length?(p=m?-1:1,x()):p<0},L.precision=function(m){return arguments.length?(T=Be(V,z=m*m),d()):vt(z)},L.fitExtent=function(m,v){return ce(L,m,v)},L.fitSize=function(m,v){return Vi(L,m,v)},L.fitWidth=function(m,v){return Di(L,m,v)},L.fitHeight=function(m,v){return Oi(L,m,v)};function x(){var m=Xe(e,0,0,c,p,h).apply(null,n(o,l)),v=Xe(e,i-m[0],r-m[1],c,p,h);return s=wi(u,f,a),V=Xn(n,v),N=Xn(s,V),T=Be(V,z),d()}function d(){return I=Z=null,L}return function(){return n=t.apply(this,arguments),L.invert=n.invert&&H,x()}}function Wr(t){var n=0,e=O/3,i=Fi(t),r=i(n,e);return r.parallels=function(o){return arguments.length?i(n=o[0]*W,e=o[1]*W):[n*J,e*J]},r}function Kr(t){var n=U(t);function e(i,r){return[i*n,q(r)/n]}return e.invert=function(i,r){return[i/n,Rt(r*n)]},e}function Qr(t,n){var e=q(t),i=(e+q(n))/2;if(Y(i)<F)return Kr(t);var r=1+e*(2*i-e),o=vt(r)/i;function l(u,f){var a=vt(r-2*i*q(f))/i;return[a*q(u*=i),o-a*U(u)]}return l.invert=function(u,f){var a=o-f,s=Vt(u,Y(a))*an(a);return a*i<0&&(s-=O*an(u)*an(a)),[s/i,Rt((r-(u*u+a*a)*i*i)/(2*i))]},l}function te(){return Wr(Qr).scale(155.424).center([0,33.6442])}function Jr(){return te().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function jr(t){var n=t.length;return{point:function(e,i){for(var r=-1;++r<n;)t[r].point(e,i)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function $r(){var t,n,e=Jr(),i,r=te().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,l=te().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,f,a={point:function(c,p){f=[c,p]}};function s(c){var p=c[0],g=c[1];return f=null,i.point(p,g),f||(o.point(p,g),f)||(u.point(p,g),f)}s.invert=function(c){var p=e.scale(),g=e.translate(),_=(c[0]-g[0])/p,w=(c[1]-g[1])/p;return(w>=.12&&w<.234&&_>=-.425&&_<-.214?r:w>=.166&&w<.234&&_>=-.214&&_<-.115?l:e).invert(c)},s.stream=function(c){return t&&n===c?t:t=jr([e.stream(n=c),r.stream(c),l.stream(c)])},s.precision=function(c){return arguments.length?(e.precision(c),r.precision(c),l.precision(c),h()):e.precision()},s.scale=function(c){return arguments.length?(e.scale(c),r.scale(c*.35),l.scale(c),s.translate(e.translate())):e.scale()},s.translate=function(c){if(!arguments.length)return e.translate();var p=e.scale(),g=+c[0],_=+c[1];return i=e.translate(c).clipExtent([[g-.455*p,_-.238*p],[g+.455*p,_+.238*p]]).stream(a),o=r.translate([g-.307*p,_+.201*p]).clipExtent([[g-.425*p+F,_+.12*p+F],[g-.214*p-F,_+.234*p-F]]).stream(a),u=l.translate([g-.205*p,_+.212*p]).clipExtent([[g-.214*p+F,_+.166*p+F],[g-.115*p-F,_+.234*p-F]]).stream(a),h()},s.fitExtent=function(c,p){return ce(s,c,p)},s.fitSize=function(c,p){return Vi(s,c,p)},s.fitWidth=function(c,p){return Di(s,c,p)},s.fitHeight=function(c,p){return Oi(s,c,p)};function h(){return t=n=null,s}return s.scale(1070)}var to={value:()=>{}};function he(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new cn(e)}function cn(t){this._=t}function no(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}cn.prototype=he.prototype={constructor:cn,on:function(t,n){var e=this._,i=no(t+"",e),r,o=-1,l=i.length;if(arguments.length<2){for(;++o<l;)if((r=(t=i[o]).type)&&(r=eo(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<l;)if(r=(t=i[o]).type)e[r]=qe(e[r],t.name,n);else if(n==null)for(r in e)e[r]=qe(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new cn(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function eo(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function qe(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=to,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}var ne="http://www.w3.org/1999/xhtml";const He={svg:"http://www.w3.org/2000/svg",xhtml:ne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function An(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),He.hasOwnProperty(n)?{space:He[n],local:t}:t}function io(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===ne&&n.documentElement.namespaceURI===ne?n.createElement(t):n.createElementNS(e,t)}}function ro(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Zi(t){var n=An(t);return(n.local?ro:io)(n)}function oo(){}function pe(t){return t==null?oo:function(){return this.querySelector(t)}}function lo(t){typeof t!="function"&&(t=pe(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],l=o.length,u=i[r]=new Array(l),f,a,s=0;s<l;++s)(f=o[s])&&(a=t.call(f,f.__data__,s,o))&&("__data__"in f&&(a.__data__=f.__data__),u[s]=a);return new nt(i,this._parents)}function uo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function so(){return[]}function xi(t){return t==null?so:function(){return this.querySelectorAll(t)}}function ao(t){return function(){return uo(t.apply(this,arguments))}}function fo(t){typeof t=="function"?t=ao(t):t=xi(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var l=n[o],u=l.length,f,a=0;a<u;++a)(f=l[a])&&(i.push(t.call(f,f.__data__,a,l)),r.push(f));return new nt(i,r)}function Bi(t){return function(){return this.matches(t)}}function Xi(t){return function(n){return n.matches(t)}}var co=Array.prototype.find;function ho(t){return function(){return co.call(this.children,t)}}function po(){return this.firstElementChild}function mo(t){return this.select(t==null?po:ho(typeof t=="function"?t:Xi(t)))}var go=Array.prototype.filter;function vo(){return Array.from(this.children)}function yo(t){return function(){return go.call(this.children,t)}}function _o(t){return this.selectAll(t==null?vo:yo(typeof t=="function"?t:Xi(t)))}function wo(t){typeof t!="function"&&(t=Bi(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],l=o.length,u=i[r]=[],f,a=0;a<l;++a)(f=o[a])&&t.call(f,f.__data__,a,o)&&u.push(f);return new nt(i,this._parents)}function qi(t){return new Array(t.length)}function So(){return new nt(this._enter||this._groups.map(qi),this._parents)}function bn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}bn.prototype={constructor:bn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ko(t){return function(){return t}}function Eo(t,n,e,i,r,o){for(var l=0,u,f=n.length,a=o.length;l<a;++l)(u=n[l])?(u.__data__=o[l],i[l]=u):e[l]=new bn(t,o[l]);for(;l<f;++l)(u=n[l])&&(r[l]=u)}function bo(t,n,e,i,r,o,l){var u,f,a=new Map,s=n.length,h=o.length,c=new Array(s),p;for(u=0;u<s;++u)(f=n[u])&&(c[u]=p=l.call(f,f.__data__,u,n)+"",a.has(p)?r[u]=f:a.set(p,f));for(u=0;u<h;++u)p=l.call(t,o[u],u,o)+"",(f=a.get(p))?(i[u]=f,f.__data__=o[u],a.delete(p)):e[u]=new bn(t,o[u]);for(u=0;u<s;++u)(f=n[u])&&a.get(c[u])===f&&(r[u]=f)}function zo(t){return t.__data__}function Mo(t,n){if(!arguments.length)return Array.from(this,zo);var e=n?bo:Eo,i=this._parents,r=this._groups;typeof t!="function"&&(t=ko(t));for(var o=r.length,l=new Array(o),u=new Array(o),f=new Array(o),a=0;a<o;++a){var s=i[a],h=r[a],c=h.length,p=To(t.call(s,s&&s.__data__,a,i)),g=p.length,_=u[a]=new Array(g),w=l[a]=new Array(g),y=f[a]=new Array(c);e(s,h,_,w,y,p,n);for(var S=0,k=0,b,z;S<g;++S)if(b=_[S]){for(S>=k&&(k=S+1);!(z=w[k])&&++k<g;);b._next=z||null}}return l=new nt(l,i),l._enter=u,l._exit=f,l}function To(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ao(){return new nt(this._exit||this._groups.map(qi),this._parents)}function Ro(t,n,e){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(r=n(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function Co(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,r=e.length,o=i.length,l=Math.min(r,o),u=new Array(r),f=0;f<l;++f)for(var a=e[f],s=i[f],h=a.length,c=u[f]=new Array(h),p,g=0;g<h;++g)(p=a[g]||s[g])&&(c[g]=p);for(;f<r;++f)u[f]=e[f];return new nt(u,this._parents)}function Lo(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,o=i[r],l;--r>=0;)(l=i[r])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Po(t){t||(t=No);function n(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var l=e[o],u=l.length,f=r[o]=new Array(u),a,s=0;s<u;++s)(a=l[s])&&(f[s]=a);f.sort(n)}return new nt(r,this._parents).order()}function No(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Io(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Vo(){return Array.from(this)}function Do(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var l=i[r];if(l)return l}return null}function Oo(){let t=0;for(const n of this)++t;return t}function Fo(){return!this.node()}function Zo(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],o=0,l=r.length,u;o<l;++o)(u=r[o])&&t.call(u,u.__data__,o,r);return this}function xo(t){return function(){this.removeAttribute(t)}}function Bo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xo(t,n){return function(){this.setAttribute(t,n)}}function qo(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Ho(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Yo(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Uo(t,n){var e=An(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?Bo:xo:typeof n=="function"?e.local?Yo:Ho:e.local?qo:Xo)(e,n))}function Hi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Go(t){return function(){this.style.removeProperty(t)}}function Wo(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Ko(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function Qo(t,n,e){return arguments.length>1?this.each((n==null?Go:typeof n=="function"?Ko:Wo)(t,n,e??"")):Ft(this.node(),t)}function Ft(t,n){return t.style.getPropertyValue(n)||Hi(t).getComputedStyle(t,null).getPropertyValue(n)}function Jo(t){return function(){delete this[t]}}function jo(t,n){return function(){this[t]=n}}function $o(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function tl(t,n){return arguments.length>1?this.each((n==null?Jo:typeof n=="function"?$o:jo)(t,n)):this.node()[t]}function Yi(t){return t.trim().split(/^|\s+/)}function de(t){return t.classList||new Ui(t)}function Ui(t){this._node=t,this._names=Yi(t.getAttribute("class")||"")}Ui.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Gi(t,n){for(var e=de(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function Wi(t,n){for(var e=de(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function nl(t){return function(){Gi(this,t)}}function el(t){return function(){Wi(this,t)}}function il(t,n){return function(){(n.apply(this,arguments)?Gi:Wi)(this,t)}}function rl(t,n){var e=Yi(t+"");if(arguments.length<2){for(var i=de(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?il:n?nl:el)(e,n))}function ol(){this.textContent=""}function ll(t){return function(){this.textContent=t}}function ul(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function sl(t){return arguments.length?this.each(t==null?ol:(typeof t=="function"?ul:ll)(t)):this.node().textContent}function al(){this.innerHTML=""}function fl(t){return function(){this.innerHTML=t}}function cl(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function hl(t){return arguments.length?this.each(t==null?al:(typeof t=="function"?cl:fl)(t)):this.node().innerHTML}function pl(){this.nextSibling&&this.parentNode.appendChild(this)}function dl(){return this.each(pl)}function ml(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gl(){return this.each(ml)}function vl(t){var n=typeof t=="function"?t:Zi(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function yl(){return null}function _l(t,n){var e=typeof t=="function"?t:Zi(t),i=n==null?yl:typeof n=="function"?n:pe(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function wl(){var t=this.parentNode;t&&t.removeChild(this)}function Sl(){return this.each(wl)}function kl(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function El(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function bl(t){return this.select(t?El:kl)}function zl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ml(t){return function(n){t.call(this,n,this.__data__)}}function Tl(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function Al(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,o;e<r;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function Rl(t,n,e){return function(){var i=this.__on,r,o=Ml(n);if(i){for(var l=0,u=i.length;l<u;++l)if((r=i[l]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=n;return}}this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function Cl(t,n,e){var i=Tl(t+""),r,o=i.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var f=0,a=u.length,s;f<a;++f)for(r=0,s=u[f];r<o;++r)if((l=i[r]).type===s.type&&l.name===s.name)return s.value}return}for(u=n?Rl:Al,r=0;r<o;++r)this.each(u(i[r],n,e));return this}function Ki(t,n,e){var i=Hi(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function Ll(t,n){return function(){return Ki(this,t,n)}}function Pl(t,n){return function(){return Ki(this,t,n.apply(this,arguments))}}function Nl(t,n){return this.each((typeof n=="function"?Pl:Ll)(t,n))}function*Il(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length,l;r<o;++r)(l=i[r])&&(yield l)}var Qi=[null];function nt(t,n){this._groups=t,this._parents=n}function nn(){return new nt([[document.documentElement]],Qi)}function Vl(){return this}nt.prototype=nn.prototype={constructor:nt,select:lo,selectAll:fo,selectChild:mo,selectChildren:_o,filter:wo,data:Mo,enter:So,exit:Ao,join:Ro,merge:Co,selection:Vl,order:Lo,sort:Po,call:Io,nodes:Vo,node:Do,size:Oo,empty:Fo,each:Zo,attr:Uo,style:Qo,property:tl,classed:rl,text:sl,html:hl,raise:dl,lower:gl,append:vl,insert:_l,remove:Sl,clone:bl,datum:zl,on:Cl,dispatch:Nl,[Symbol.iterator]:Il};function wt(t){return typeof t=="string"?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],Qi)}function Dl(t){let n;for(;n=t.sourceEvent;)t=n;return t}function kt(t,n){if(t=Dl(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const ee={capture:!0,passive:!1};function ie(t){t.preventDefault(),t.stopImmediatePropagation()}function Ol(t){var n=t.document.documentElement,e=wt(t).on("dragstart.drag",ie,ee);"onselectstart"in n?e.on("selectstart.drag",ie,ee):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Fl(t,n){var e=t.document.documentElement,i=wt(t).on("dragstart.drag",null);n&&(i.on("click.drag",ie,ee),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var Ye=180/Math.PI,re={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ji(t,n,e,i,r,o){var l,u,f;return(l=Math.sqrt(t*t+n*n))&&(t/=l,n/=l),(f=t*e+n*i)&&(e-=t*f,i-=n*f),(u=Math.sqrt(e*e+i*i))&&(e/=u,i/=u,f/=u),t*i<n*e&&(t=-t,n=-n,f=-f,l=-l),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*Ye,skewX:Math.atan(f)*Ye,scaleX:l,scaleY:u}}var un;function Zl(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?re:Ji(n.a,n.b,n.c,n.d,n.e,n.f)}function xl(t){return t==null||(un||(un=document.createElementNS("http://www.w3.org/2000/svg","g")),un.setAttribute("transform",t),!(t=un.transform.baseVal.consolidate()))?re:(t=t.matrix,Ji(t.a,t.b,t.c,t.d,t.e,t.f))}function ji(t,n,e,i){function r(a){return a.length?a.pop()+" ":""}function o(a,s,h,c,p,g){if(a!==h||s!==c){var _=p.push("translate(",null,n,null,e);g.push({i:_-4,x:Et(a,h)},{i:_-2,x:Et(s,c)})}else(h||c)&&p.push("translate("+h+n+c+e)}function l(a,s,h,c){a!==s?(a-s>180?s+=360:s-a>180&&(a+=360),c.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Et(a,s)})):s&&h.push(r(h)+"rotate("+s+i)}function u(a,s,h,c){a!==s?c.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Et(a,s)}):s&&h.push(r(h)+"skewX("+s+i)}function f(a,s,h,c,p,g){if(a!==h||s!==c){var _=p.push(r(p)+"scale(",null,",",null,")");g.push({i:_-4,x:Et(a,h)},{i:_-2,x:Et(s,c)})}else(h!==1||c!==1)&&p.push(r(p)+"scale("+h+","+c+")")}return function(a,s){var h=[],c=[];return a=t(a),s=t(s),o(a.translateX,a.translateY,s.translateX,s.translateY,h,c),l(a.rotate,s.rotate,h,c),u(a.skewX,s.skewX,h,c),f(a.scaleX,a.scaleY,s.scaleX,s.scaleY,h,c),a=s=null,function(p){for(var g=-1,_=c.length,w;++g<_;)h[(w=c[g]).i]=w.x(p);return h.join("")}}}var Bl=ji(Zl,"px, ","px)","deg)"),Xl=ji(xl,", ",")",")"),ql=1e-12;function Ue(t){return((t=Math.exp(t))+1/t)/2}function Hl(t){return((t=Math.exp(t))-1/t)/2}function Yl(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ul=function t(n,e,i){function r(o,l){var u=o[0],f=o[1],a=o[2],s=l[0],h=l[1],c=l[2],p=s-u,g=h-f,_=p*p+g*g,w,y;if(_<ql)y=Math.log(c/a)/n,w=function(V){return[u+V*p,f+V*g,a*Math.exp(n*V*y)]};else{var S=Math.sqrt(_),k=(c*c-a*a+i*_)/(2*a*e*S),b=(c*c-a*a-i*_)/(2*c*e*S),z=Math.log(Math.sqrt(k*k+1)-k),T=Math.log(Math.sqrt(b*b+1)-b);y=(T-z)/n,w=function(V){var N=V*y,I=Ue(z),Z=a/(e*S)*(I*Yl(n*N+z)-Hl(z));return[u+Z*p,f+Z*g,a*I/Ue(n*N+z)]}}return w.duration=y*1e3*n/Math.SQRT2,w}return r.rho=function(o){var l=Math.max(.001,+o),u=l*l,f=u*u;return t(l,u,f)},r}(Math.SQRT2,2,4);var Zt=0,Gt=0,xt=0,$i=1e3,zn,Wt,Mn=0,Lt=0,Rn=0,$t=typeof performance=="object"&&performance.now?performance:Date,tr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function me(){return Lt||(tr(Gl),Lt=$t.now()+Rn)}function Gl(){Lt=0}function Tn(){this._call=this._time=this._next=null}Tn.prototype=nr.prototype={constructor:Tn,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?me():+e)+(n==null?0:+n),!this._next&&Wt!==this&&(Wt?Wt._next=this:zn=this,Wt=this),this._call=t,this._time=e,oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,oe())}};function nr(t,n,e){var i=new Tn;return i.restart(t,n,e),i}function Wl(){me(),++Zt;for(var t=zn,n;t;)(n=Lt-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Zt}function Ge(){Lt=(Mn=$t.now())+Rn,Zt=Gt=0;try{Wl()}finally{Zt=0,Ql(),Lt=0}}function Kl(){var t=$t.now(),n=t-Mn;n>$i&&(Rn-=n,Mn=t)}function Ql(){for(var t,n=zn,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:zn=e);Wt=t,oe(i)}function oe(t){if(!Zt){Gt&&(Gt=clearTimeout(Gt));var n=t-Lt;n>24?(t<1/0&&(Gt=setTimeout(Ge,t-$t.now()-Rn)),xt&&(xt=clearInterval(xt))):(xt||(Mn=$t.now(),xt=setInterval(Kl,$i)),Zt=1,tr(Ge))}}function We(t,n,e){var i=new Tn;return n=n==null?0:+n,i.restart(r=>{i.stop(),t(r+n)},n,e),i}var Jl=he("start","end","cancel","interrupt"),jl=[],er=0,Ke=1,le=2,hn=3,Qe=4,ue=5,pn=6;function Cn(t,n,e,i,r,o){var l=t.__transition;if(!l)t.__transition={};else if(e in l)return;$l(t,e,{name:n,index:i,group:r,on:Jl,tween:jl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:er})}function ge(t,n){var e=at(t,n);if(e.state>er)throw new Error("too late; already scheduled");return e}function pt(t,n){var e=at(t,n);if(e.state>hn)throw new Error("too late; already running");return e}function at(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function $l(t,n,e){var i=t.__transition,r;i[n]=e,e.timer=nr(o,0,e.time);function o(a){e.state=Ke,e.timer.restart(l,e.delay,e.time),e.delay<=a&&l(a-e.delay)}function l(a){var s,h,c,p;if(e.state!==Ke)return f();for(s in i)if(p=i[s],p.name===e.name){if(p.state===hn)return We(l);p.state===Qe?(p.state=pn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[s]):+s<n&&(p.state=pn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[s])}if(We(function(){e.state===hn&&(e.state=Qe,e.timer.restart(u,e.delay,e.time),u(a))}),e.state=le,e.on.call("start",t,t.__data__,e.index,e.group),e.state===le){for(e.state=hn,r=new Array(c=e.tween.length),s=0,h=-1;s<c;++s)(p=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(r[++h]=p);r.length=h+1}}function u(a){for(var s=a<e.duration?e.ease.call(null,a/e.duration):(e.timer.restart(f),e.state=ue,1),h=-1,c=r.length;++h<c;)r[h].call(t,s);e.state===ue&&(e.on.call("end",t,t.__data__,e.index,e.group),f())}function f(){e.state=pn,e.timer.stop(),delete i[n];for(var a in i)return;delete t.__transition}}function dn(t,n){var e=t.__transition,i,r,o=!0,l;if(e){n=n==null?null:n+"";for(l in e){if((i=e[l]).name!==n){o=!1;continue}r=i.state>le&&i.state<ue,i.state=pn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete e[l]}o&&delete t.__transition}}function tu(t){return this.each(function(){dn(this,t)})}function nu(t,n){var e,i;return function(){var r=pt(this,t),o=r.tween;if(o!==e){i=e=o;for(var l=0,u=i.length;l<u;++l)if(i[l].name===n){i=i.slice(),i.splice(l,1);break}}r.tween=i}}function eu(t,n,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=pt(this,t),l=o.tween;if(l!==i){r=(i=l).slice();for(var u={name:n,value:e},f=0,a=r.length;f<a;++f)if(r[f].name===n){r[f]=u;break}f===a&&r.push(u)}o.tween=r}}function iu(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i=at(this.node(),e).tween,r=0,o=i.length,l;r<o;++r)if((l=i[r]).name===t)return l.value;return null}return this.each((n==null?nu:eu)(e,t,n))}function ve(t,n,e){var i=t._id;return t.each(function(){var r=pt(this,i);(r.value||(r.value={}))[n]=e.apply(this,arguments)}),function(r){return at(r,i).value[n]}}function ir(t,n){var e;return(typeof n=="number"?Et:n instanceof ke?Ee:(e=ke(n))?(n=e,Ee):pr)(t,n)}function ru(t){return function(){this.removeAttribute(t)}}function ou(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lu(t,n,e){var i,r=e+"",o;return function(){var l=this.getAttribute(t);return l===r?null:l===i?o:o=n(i=l,e)}}function uu(t,n,e){var i,r=e+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===r?null:l===i?o:o=n(i=l,e)}}function su(t,n,e){var i,r,o;return function(){var l,u=e(this),f;return u==null?void this.removeAttribute(t):(l=this.getAttribute(t),f=u+"",l===f?null:l===i&&f===r?o:(r=f,o=n(i=l,u)))}}function au(t,n,e){var i,r,o;return function(){var l,u=e(this),f;return u==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),f=u+"",l===f?null:l===i&&f===r?o:(r=f,o=n(i=l,u)))}}function fu(t,n){var e=An(t),i=e==="transform"?Xl:ir;return this.attrTween(t,typeof n=="function"?(e.local?au:su)(e,i,ve(this,"attr."+t,n)):n==null?(e.local?ou:ru)(e):(e.local?uu:lu)(e,i,n))}function cu(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function hu(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function pu(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&hu(t,o)),e}return r._value=n,r}function du(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&cu(t,o)),e}return r._value=n,r}function mu(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var i=An(t);return this.tween(e,(i.local?pu:du)(i,n))}function gu(t,n){return function(){ge(this,t).delay=+n.apply(this,arguments)}}function vu(t,n){return n=+n,function(){ge(this,t).delay=n}}function yu(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?gu:vu)(n,t)):at(this.node(),n).delay}function _u(t,n){return function(){pt(this,t).duration=+n.apply(this,arguments)}}function wu(t,n){return n=+n,function(){pt(this,t).duration=n}}function Su(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?_u:wu)(n,t)):at(this.node(),n).duration}function ku(t,n){if(typeof n!="function")throw new Error;return function(){pt(this,t).ease=n}}function Eu(t){var n=this._id;return arguments.length?this.each(ku(n,t)):at(this.node(),n).ease}function bu(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;pt(this,t).ease=e}}function zu(t){if(typeof t!="function")throw new Error;return this.each(bu(this._id,t))}function Mu(t){typeof t!="function"&&(t=Bi(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],l=o.length,u=i[r]=[],f,a=0;a<l;++a)(f=o[a])&&t.call(f,f.__data__,a,o)&&u.push(f);return new yt(i,this._parents,this._name,this._id)}function Tu(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),l=new Array(i),u=0;u<o;++u)for(var f=n[u],a=e[u],s=f.length,h=l[u]=new Array(s),c,p=0;p<s;++p)(c=f[p]||a[p])&&(h[p]=c);for(;u<i;++u)l[u]=n[u];return new yt(l,this._parents,this._name,this._id)}function Au(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Ru(t,n,e){var i,r,o=Au(n)?ge:pt;return function(){var l=o(this,t),u=l.on;u!==i&&(r=(i=u).copy()).on(n,e),l.on=r}}function Cu(t,n){var e=this._id;return arguments.length<2?at(this.node(),e).on.on(t):this.each(Ru(e,t,n))}function Lu(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Pu(){return this.on("end.remove",Lu(this._id))}function Nu(t){var n=this._name,e=this._id;typeof t!="function"&&(t=pe(t));for(var i=this._groups,r=i.length,o=new Array(r),l=0;l<r;++l)for(var u=i[l],f=u.length,a=o[l]=new Array(f),s,h,c=0;c<f;++c)(s=u[c])&&(h=t.call(s,s.__data__,c,u))&&("__data__"in s&&(h.__data__=s.__data__),a[c]=h,Cn(a[c],n,e,c,a,at(s,e)));return new yt(o,this._parents,n,e)}function Iu(t){var n=this._name,e=this._id;typeof t!="function"&&(t=xi(t));for(var i=this._groups,r=i.length,o=[],l=[],u=0;u<r;++u)for(var f=i[u],a=f.length,s,h=0;h<a;++h)if(s=f[h]){for(var c=t.call(s,s.__data__,h,f),p,g=at(s,e),_=0,w=c.length;_<w;++_)(p=c[_])&&Cn(p,n,e,_,c,g);o.push(c),l.push(s)}return new yt(o,l,n,e)}var Vu=nn.prototype.constructor;function Du(){return new Vu(this._groups,this._parents)}function Ou(t,n){var e,i,r;return function(){var o=Ft(this,t),l=(this.style.removeProperty(t),Ft(this,t));return o===l?null:o===e&&l===i?r:r=n(e=o,i=l)}}function rr(t){return function(){this.style.removeProperty(t)}}function Fu(t,n,e){var i,r=e+"",o;return function(){var l=Ft(this,t);return l===r?null:l===i?o:o=n(i=l,e)}}function Zu(t,n,e){var i,r,o;return function(){var l=Ft(this,t),u=e(this),f=u+"";return u==null&&(f=u=(this.style.removeProperty(t),Ft(this,t))),l===f?null:l===i&&f===r?o:(r=f,o=n(i=l,u))}}function xu(t,n){var e,i,r,o="style."+n,l="end."+o,u;return function(){var f=pt(this,t),a=f.on,s=f.value[o]==null?u||(u=rr(n)):void 0;(a!==e||r!==s)&&(i=(e=a).copy()).on(l,r=s),f.on=i}}function Bu(t,n,e){var i=(t+="")=="transform"?Bl:ir;return n==null?this.styleTween(t,Ou(t,i)).on("end.style."+t,rr(t)):typeof n=="function"?this.styleTween(t,Zu(t,i,ve(this,"style."+t,n))).each(xu(this._id,t)):this.styleTween(t,Fu(t,i,n),e).on("end.style."+t,null)}function Xu(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function qu(t,n,e){var i,r;function o(){var l=n.apply(this,arguments);return l!==r&&(i=(r=l)&&Xu(t,l,e)),i}return o._value=n,o}function Hu(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,qu(t,n,e??""))}function Yu(t){return function(){this.textContent=t}}function Uu(t){return function(){var n=t(this);this.textContent=n??""}}function Gu(t){return this.tween("text",typeof t=="function"?Uu(ve(this,"text",t)):Yu(t==null?"":t+""))}function Wu(t){return function(n){this.textContent=t.call(this,n)}}function Ku(t){var n,e;function i(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Wu(r)),n}return i._value=t,i}function Qu(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Ku(t))}function Ju(){for(var t=this._name,n=this._id,e=or(),i=this._groups,r=i.length,o=0;o<r;++o)for(var l=i[o],u=l.length,f,a=0;a<u;++a)if(f=l[a]){var s=at(f,n);Cn(f,t,e,a,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new yt(i,this._parents,t,e)}function ju(){var t,n,e=this,i=e._id,r=e.size();return new Promise(function(o,l){var u={value:l},f={value:function(){--r===0&&o()}};e.each(function(){var a=pt(this,i),s=a.on;s!==t&&(n=(t=s).copy(),n._.cancel.push(u),n._.interrupt.push(u),n._.end.push(f)),a.on=n}),r===0&&o()})}var $u=0;function yt(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function or(){return++$u}var dt=nn.prototype;yt.prototype={constructor:yt,select:Nu,selectAll:Iu,selectChild:dt.selectChild,selectChildren:dt.selectChildren,filter:Mu,merge:Tu,selection:Du,transition:Ju,call:dt.call,nodes:dt.nodes,node:dt.node,size:dt.size,empty:dt.empty,each:dt.each,on:Cu,attr:fu,attrTween:mu,style:Bu,styleTween:Hu,text:Gu,textTween:Qu,remove:Pu,tween:iu,delay:yu,duration:Su,ease:Eu,easeVarying:zu,end:ju,[Symbol.iterator]:dt[Symbol.iterator]};function ts(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ns={time:null,delay:0,duration:250,ease:ts};function es(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function is(t){var n,e;t instanceof yt?(n=t._id,t=t._name):(n=or(),(e=ns).time=me(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var l=i[o],u=l.length,f,a=0;a<u;++a)(f=l[a])&&Cn(f,t,n,a,l,e||es(f,n));return new yt(i,this._parents,t,n)}nn.prototype.interrupt=tu;nn.prototype.transition=is;const sn=t=>()=>t;function rs(t,{sourceEvent:n,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function gt(t,n,e){this.k=t,this.x=n,this.y=e}gt.prototype={constructor:gt,scale:function(t){return t===1?this:new gt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new gt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tt=new gt(1,0,0);gt.prototype;function Fn(t){t.stopImmediatePropagation()}function Bt(t){t.preventDefault(),t.stopImmediatePropagation()}function os(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ls(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Je(){return this.__zoom||tt}function us(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ss(){return navigator.maxTouchPoints||"ontouchstart"in this}function as(t,n,e){var i=t.invertX(n[0][0])-e[0][0],r=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],l=t.invertY(n[1][1])-e[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function fs(){var t=os,n=ls,e=as,i=us,r=ss,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,f=Ul,a=he("start","zoom","end"),s,h,c,p=500,g=150,_=0,w=10;function y(d){d.property("__zoom",Je).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",Z).filter(r).on("touchstart.zoom",L).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",x).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(d,m,v,E){var M=d.selection?d.selection():d;M.property("__zoom",Je),d!==M?z(d,m,v,E):M.interrupt().each(function(){T(this,arguments).event(E).start().zoom(null,typeof m=="function"?m.apply(this,arguments):m).end()})},y.scaleBy=function(d,m,v,E){y.scaleTo(d,function(){var M=this.__zoom.k,R=typeof m=="function"?m.apply(this,arguments):m;return M*R},v,E)},y.scaleTo=function(d,m,v,E){y.transform(d,function(){var M=n.apply(this,arguments),R=this.__zoom,P=v==null?b(M):typeof v=="function"?v.apply(this,arguments):v,D=R.invert(P),B=typeof m=="function"?m.apply(this,arguments):m;return e(k(S(R,B),P,D),M,l)},v,E)},y.translateBy=function(d,m,v,E){y.transform(d,function(){return e(this.__zoom.translate(typeof m=="function"?m.apply(this,arguments):m,typeof v=="function"?v.apply(this,arguments):v),n.apply(this,arguments),l)},null,E)},y.translateTo=function(d,m,v,E,M){y.transform(d,function(){var R=n.apply(this,arguments),P=this.__zoom,D=E==null?b(R):typeof E=="function"?E.apply(this,arguments):E;return e(tt.translate(D[0],D[1]).scale(P.k).translate(typeof m=="function"?-m.apply(this,arguments):-m,typeof v=="function"?-v.apply(this,arguments):-v),R,l)},E,M)};function S(d,m){return m=Math.max(o[0],Math.min(o[1],m)),m===d.k?d:new gt(m,d.x,d.y)}function k(d,m,v){var E=m[0]-v[0]*d.k,M=m[1]-v[1]*d.k;return E===d.x&&M===d.y?d:new gt(d.k,E,M)}function b(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function z(d,m,v,E){d.on("start.zoom",function(){T(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(E).end()}).tween("zoom",function(){var M=this,R=arguments,P=T(M,R).event(E),D=n.apply(M,R),B=v==null?b(D):typeof v=="function"?v.apply(M,R):v,G=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),X=M.__zoom,K=typeof m=="function"?m.apply(M,R):m,ut=f(X.invert(B).concat(G/X.k),K.invert(B).concat(G/K.k));return function($){if($===1)$=K;else{var st=ut($),C=G/st[2];$=new gt(C,B[0]-st[0]*C,B[1]-st[1]*C)}P.zoom(null,$)}})}function T(d,m,v){return!v&&d.__zooming||new V(d,m)}function V(d,m){this.that=d,this.args=m,this.active=0,this.sourceEvent=null,this.extent=n.apply(d,m),this.taps=0}V.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,m){return this.mouse&&d!=="mouse"&&(this.mouse[1]=m.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=m.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=m.invert(this.touch1[0])),this.that.__zoom=m,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var m=wt(this.that).datum();a.call(d,this.that,new rs(d,{sourceEvent:this.sourceEvent,target:y,type:d,transform:this.that.__zoom,dispatch:a}),m)}};function N(d,...m){if(!t.apply(this,arguments))return;var v=T(this,m).event(d),E=this.__zoom,M=Math.max(o[0],Math.min(o[1],E.k*Math.pow(2,i.apply(this,arguments)))),R=kt(d);if(v.wheel)(v.mouse[0][0]!==R[0]||v.mouse[0][1]!==R[1])&&(v.mouse[1]=E.invert(v.mouse[0]=R)),clearTimeout(v.wheel);else{if(E.k===M)return;v.mouse=[R,E.invert(R)],dn(this),v.start()}Bt(d),v.wheel=setTimeout(P,g),v.zoom("mouse",e(k(S(E,M),v.mouse[0],v.mouse[1]),v.extent,l));function P(){v.wheel=null,v.end()}}function I(d,...m){if(c||!t.apply(this,arguments))return;var v=d.currentTarget,E=T(this,m,!0).event(d),M=wt(d.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",G,!0),R=kt(d,v),P=d.clientX,D=d.clientY;Ol(d.view),Fn(d),E.mouse=[R,this.__zoom.invert(R)],dn(this),E.start();function B(X){if(Bt(X),!E.moved){var K=X.clientX-P,ut=X.clientY-D;E.moved=K*K+ut*ut>_}E.event(X).zoom("mouse",e(k(E.that.__zoom,E.mouse[0]=kt(X,v),E.mouse[1]),E.extent,l))}function G(X){M.on("mousemove.zoom mouseup.zoom",null),Fl(X.view,E.moved),Bt(X),E.event(X).end()}}function Z(d,...m){if(t.apply(this,arguments)){var v=this.__zoom,E=kt(d.changedTouches?d.changedTouches[0]:d,this),M=v.invert(E),R=v.k*(d.shiftKey?.5:2),P=e(k(S(v,R),E,M),n.apply(this,m),l);Bt(d),u>0?wt(this).transition().duration(u).call(z,P,E,d):wt(this).call(y.transform,P,E,d)}}function L(d,...m){if(t.apply(this,arguments)){var v=d.touches,E=v.length,M=T(this,m,d.changedTouches.length===E).event(d),R,P,D,B;for(Fn(d),P=0;P<E;++P)D=v[P],B=kt(D,this),B=[B,this.__zoom.invert(B),D.identifier],M.touch0?!M.touch1&&M.touch0[2]!==B[2]&&(M.touch1=B,M.taps=0):(M.touch0=B,R=!0,M.taps=1+!!s);s&&(s=clearTimeout(s)),R&&(M.taps<2&&(h=B[0],s=setTimeout(function(){s=null},p)),dn(this),M.start())}}function H(d,...m){if(this.__zooming){var v=T(this,m).event(d),E=d.changedTouches,M=E.length,R,P,D,B;for(Bt(d),R=0;R<M;++R)P=E[R],D=kt(P,this),v.touch0&&v.touch0[2]===P.identifier?v.touch0[0]=D:v.touch1&&v.touch1[2]===P.identifier&&(v.touch1[0]=D);if(P=v.that.__zoom,v.touch1){var G=v.touch0[0],X=v.touch0[1],K=v.touch1[0],ut=v.touch1[1],$=($=K[0]-G[0])*$+($=K[1]-G[1])*$,st=(st=ut[0]-X[0])*st+(st=ut[1]-X[1])*st;P=S(P,Math.sqrt($/st)),D=[(G[0]+K[0])/2,(G[1]+K[1])/2],B=[(X[0]+ut[0])/2,(X[1]+ut[1])/2]}else if(v.touch0)D=v.touch0[0],B=v.touch0[1];else return;v.zoom("touch",e(k(P,D,B),v.extent,l))}}function x(d,...m){if(this.__zooming){var v=T(this,m).event(d),E=d.changedTouches,M=E.length,R,P;for(Fn(d),c&&clearTimeout(c),c=setTimeout(function(){c=null},p),R=0;R<M;++R)P=E[R],v.touch0&&v.touch0[2]===P.identifier?delete v.touch0:v.touch1&&v.touch1[2]===P.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(P=kt(P,this),Math.hypot(h[0]-P[0],h[1]-P[1])<w)){var D=wt(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return y.wheelDelta=function(d){return arguments.length?(i=typeof d=="function"?d:sn(+d),y):i},y.filter=function(d){return arguments.length?(t=typeof d=="function"?d:sn(!!d),y):t},y.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:sn(!!d),y):r},y.extent=function(d){return arguments.length?(n=typeof d=="function"?d:sn([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),y):n},y.scaleExtent=function(d){return arguments.length?(o[0]=+d[0],o[1]=+d[1],y):[o[0],o[1]]},y.translateExtent=function(d){return arguments.length?(l[0][0]=+d[0][0],l[1][0]=+d[1][0],l[0][1]=+d[0][1],l[1][1]=+d[1][1],y):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},y.constrain=function(d){return arguments.length?(e=d,y):e},y.duration=function(d){return arguments.length?(u=+d,y):u},y.interpolate=function(d){return arguments.length?(f=d,y):f},y.on=function(){var d=a.on.apply(a,arguments);return d===a?y:d},y.clickDistance=function(d){return arguments.length?(_=(d=+d)*d,y):Math.sqrt(_)},y.tapDistance=function(d){return arguments.length?(w=+d,y):w},y}function je(t){let n,e='<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H6V2H2V6H0V0Z" fill="black" class="svelte-1e370w0"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M15 0L15 6L13 6L13 2L9 2L9 -2.62268e-07L15 0Z" fill="black" class="svelte-1e370w0"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M15 15L9 15L9 13L13 13L13 9L15 9L15 15Z" fill="black" class="svelte-1e370w0"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 15L-2.62268e-07 9L2 9L2 13L6 13L6 15L0 15Z" fill="black" class="svelte-1e370w0"></path></svg>',i,r;return{c(){n=Mt("button"),n.innerHTML=e,this.h()},l(o){n=Tt(o,"BUTTON",{class:!0,"data-svelte-h":!0}),gi(n)!=="svelte-dllmeb"&&(n.innerHTML=e),this.h()},h(){A(n,"class","zoom-button zoom-reset svelte-1e370w0")},m(o,l){tn(o,n,l),i||(r=St(n,"click",function(){mn(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(o,l){t=o},d(o){o&&Q(n),i=!1,r()}}}function $e(t){let n,e='<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H6V2H2V6H0V0Z" fill="black" class="svelte-1e370w0"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M15 0L15 6L13 6L13 2L9 2L9 -2.62268e-07L15 0Z" fill="black" class="svelte-1e370w0"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M15 15L9 15L9 13L13 13L13 9L15 9L15 15Z" fill="black" class="svelte-1e370w0"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 15L-2.62268e-07 9L2 9L2 13L6 13L6 15L0 15Z" fill="black" class="svelte-1e370w0"></path></svg>',i,r;return{c(){n=Mt("button"),n.innerHTML=e,this.h()},l(o){n=Tt(o,"BUTTON",{class:!0,"data-svelte-h":!0}),gi(n)!=="svelte-dllmeb"&&(n.innerHTML=e),this.h()},h(){A(n,"class","zoom-button zoom-reset svelte-1e370w0")},m(o,l){tn(o,n,l),i||(r=St(n,"click",function(){mn(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(o,l){t=o},d(o){o&&Q(n),i=!1,r()}}}function cs(t){let n,e,i,r,o,l,u,f,a,s,h,c,p,g=t[3]&&t[7]&&je(t),_=t[3]&&!t[7]&&$e(t);return{c(){n=Mt("div"),g&&g.c(),e=Kt(),i=Mt("button"),r=bt("svg"),o=bt("path"),l=Kt(),u=Mt("button"),f=bt("svg"),a=bt("path"),s=Kt(),_&&_.c(),this.h()},l(w){n=Tt(w,"DIV",{class:!0});var y=et(n);g&&g.l(y),e=Qt(y),i=Tt(y,"BUTTON",{class:!0});var S=et(i);r=zt(S,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var k=et(r);o=zt(k,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0,class:!0}),et(o).forEach(Q),k.forEach(Q),S.forEach(Q),l=Qt(y),u=Tt(y,"BUTTON",{class:!0});var b=et(u);f=zt(b,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var z=et(f);a=zt(z,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0,class:!0}),et(a).forEach(Q),z.forEach(Q),b.forEach(Q),s=Qt(y),_&&_.l(y),y.forEach(Q),this.h()},h(){A(o,"fill-rule","evenodd"),A(o,"clip-rule","evenodd"),A(o,"d","M11 1.5C11 2.32843 10.3284 3 9.5 3L1.5 3C0.671573 3 5.87108e-08 2.32843 1.31134e-07 1.5C2.03558e-07 0.671572 0.671573 -9.0294e-07 1.5 -8.30516e-07L9.5 -1.31134e-07C10.3284 -5.87108e-08 11 0.671573 11 1.5Z"),A(o,"fill","black"),A(o,"class","svelte-1e370w0"),A(r,"width","11"),A(r,"height","3"),A(r,"viewBox","0 0 11 3"),A(r,"fill","none"),A(r,"xmlns","http://www.w3.org/2000/svg"),A(i,"class","zoom-button zoom-out svelte-1e370w0"),i.disabled=t[5],A(a,"fill-rule","evenodd"),A(a,"clip-rule","evenodd"),A(a,"d","M7 1.5C7 0.671573 6.32843 0 5.5 0C4.67157 0 4 0.671573 4 1.5V4L1.5 4C0.671573 4 0 4.67157 0 5.5C0 6.32843 0.671573 7 1.5 7L4 7V9.5C4 10.3284 4.67157 11 5.5 11C6.32843 11 7 10.3284 7 9.5V7L9.5 7C10.3284 7 11 6.32843 11 5.5C11 4.67157 10.3284 4 9.5 4L7 4V1.5Z"),A(a,"fill","black"),A(a,"class","svelte-1e370w0"),A(f,"width","11"),A(f,"height","11"),A(f,"viewBox","0 0 11 11"),A(f,"fill","none"),A(f,"xmlns","http://www.w3.org/2000/svg"),A(u,"class","zoom-button zoom-in svelte-1e370w0"),u.disabled=t[4],A(n,"class",h="zoom-controls "+t[6]+" svelte-1e370w0")},m(w,y){tn(w,n,y),g&&g.m(n,null),j(n,e),j(n,i),j(i,r),j(r,o),j(n,l),j(n,u),j(u,f),j(f,a),j(n,s),_&&_.m(n,null),c||(p=[St(i,"click",function(){mn(t[1])&&t[1].apply(this,arguments)}),St(u,"click",function(){mn(t[0])&&t[0].apply(this,arguments)})],c=!0)},p(w,[y]){t=w,t[3]&&t[7]?g?g.p(t,y):(g=je(t),g.c(),g.m(n,e)):g&&(g.d(1),g=null),y&32&&(i.disabled=t[5]),y&16&&(u.disabled=t[4]),t[3]&&!t[7]?_?_.p(t,y):(_=$e(t),_.c(),_.m(n,null)):_&&(_.d(1),_=null),y&64&&h!==(h="zoom-controls "+t[6]+" svelte-1e370w0")&&A(n,"class",h)},i:ye,o:ye,d(w){w&&Q(n),g&&g.d(),_&&_.d(),c=!1,ui(p)}}}function hs(t,n,e){let i,{zoomIn:r}=n,{zoomOut:o}=n,{zoomReset:l}=n,{showReset:u=!1}=n,{disableZoomIn:f=!1}=n,{disableZoomOut:a=!1}=n,{controlPosition:s}=n;return t.$$set=h=>{"zoomIn"in h&&e(0,r=h.zoomIn),"zoomOut"in h&&e(1,o=h.zoomOut),"zoomReset"in h&&e(2,l=h.zoomReset),"showReset"in h&&e(3,u=h.showReset),"disableZoomIn"in h&&e(4,f=h.disableZoomIn),"disableZoomOut"in h&&e(5,a=h.disableZoomOut),"controlPosition"in h&&e(6,s=h.controlPosition)},t.$$.update=()=>{t.$$.dirty&64&&e(7,i=s.includes("top"))},[r,o,l,u,f,a,s,i]}class lr extends ri{constructor(n){super(),oi(this,n,hs,cs,li,{zoomIn:0,zoomOut:1,zoomReset:2,showReset:3,disableZoomIn:4,disableZoomOut:5,controlPosition:6})}}lr.__docgen={version:3,name:"ZoomControls.svelte",data:[{visibility:"public",description:null,keywords:[],name:"zoomIn",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"zoomOut",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"zoomReset",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"showReset",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{visibility:"public",description:null,keywords:[],name:"disableZoomIn",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{visibility:"public",description:null,keywords:[],name:"disableZoomOut",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{keywords:[{name:"type",description:'{"bottom-left" | "bottom-right" | "top-left" | "top-right"}'}],visibility:"public",description:"Where the zoom control UI should be positioned.",name:"controlPosition",kind:"let",static:!1,readonly:!1,type:{kind:"union",text:'"bottom-left" | "bottom-right" | "top-left" | "top-right"',type:[{kind:"type",text:'"bottom-left"',type:'"bottom-left"'},{kind:"type",text:'"bottom-right"',type:'"bottom-right"'},{kind:"type",text:'"top-left"',type:'"top-left"'},{kind:"type",text:'"top-right"',type:'"top-right"'}]}}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const ps=t=>({props:t[0]&2048}),ti=t=>({props:t[11].props});function ni(t){let n,e,i,r;return e=new lr({props:{controlPosition:t[0],showReset:t[13].k!==tt.k||t[13].x!==tt.x||t[13].y!==tt.y,zoomIn:t[17],zoomOut:t[18],zoomReset:t[19],disableZoomOut:t[13].k===tt.k,disableZoomIn:t[13].k===t[6]}}),{c(){n=Mt("div"),hi(e.$$.fragment),this.h()},l(o){n=Tt(o,"DIV",{class:!0});var l=et(n);pi(e.$$.fragment,l),l.forEach(Q),this.h()},h(){A(n,"class",i="map-controls "+t[0]+" svelte-4lqe40")},m(o,l){tn(o,n,l),di(e,n,null),r=!0},p(o,l){const u={};l[0]&1&&(u.controlPosition=o[0]),l[0]&8192&&(u.showReset=o[13].k!==tt.k||o[13].x!==tt.x||o[13].y!==tt.y),l[0]&8192&&(u.disableZoomOut=o[13].k===tt.k),l[0]&8256&&(u.disableZoomIn=o[13].k===o[6]),e.$set(u),(!r||l[0]&1&&i!==(i="map-controls "+o[0]+" svelte-4lqe40"))&&A(n,"class",i)},i(o){r||(ft(e.$$.fragment,o),r=!0)},o(o){_t(e.$$.fragment,o),r=!1},d(o){o&&Q(n),mi(e)}}}function ei(t){let n,e;return n=new dr({props:{x:t[11].x,y:t[11].y,containParent:t[8],$$slots:{default:[ds]},$$scope:{ctx:t}}}),{c(){hi(n.$$.fragment)},l(i){pi(n.$$.fragment,i)},m(i,r){di(n,i,r),e=!0},p(i,r){const o={};r[0]&2048&&(o.x=i[11].x),r[0]&2048&&(o.y=i[11].y),r[0]&256&&(o.containParent=i[8]),r[0]&2048|r[1]&4&&(o.$$scope={dirty:r,ctx:i}),n.$set(o)},i(i){e||(ft(n.$$.fragment,i),e=!0)},o(i){_t(n.$$.fragment,i),e=!1},d(i){mi(n,i)}}}function ds(t){let n;const e=t[28].tooltip,i=si(e,t,t[33],ti);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,o){i&&i.m(r,o),n=!0},p(r,o){i&&i.p&&(!n||o[0]&2048|o[1]&4)&&ai(i,e,r,r[33],n?ci(e,r[33],o,ps):fi(r[33]),ti)},i(r){n||(ft(i,r),n=!0)},o(r){_t(i,r),n=!1},d(r){i&&i.d(r)}}}function ms(t){let n,e,i,r,o,l,u,f,a,s=`${se(t[9],t[1],t[2])}px`,h,c,p;const g=t[28].default,_=si(g,t,t[33],null);let w=t[5]&&ni(t),y=t[11]&&ei(t);return{c(){n=Mt("div"),e=bt("svg"),i=bt("rect"),r=bt("g"),_&&_.c(),l=Kt(),w&&w.c(),u=Kt(),y&&y.c(),this.h()},l(S){n=Tt(S,"DIV",{class:!0,"aria-hidden":!0,role:!0,"aria-label":!0});var k=et(n);e=zt(k,"svg",{width:!0,height:!0});var b=et(e);i=zt(b,"rect",{role:!0,class:!0,x:!0,y:!0,width:!0,height:!0,fill:!0}),et(i).forEach(Q),r=zt(b,"g",{class:!0,transform:!0});var z=et(r);_&&_.l(z),z.forEach(Q),b.forEach(Q),l=Qt(k),w&&w.l(k),u=Qt(k),y&&y.l(k),k.forEach(Q),this.h()},h(){A(i,"role","presentation"),A(i,"class","map-bg svelte-4lqe40"),A(i,"x","0"),A(i,"y","0"),A(i,"width",t[9]),A(i,"height",t[10]),A(i,"fill",t[7]),A(r,"class","zoom-group svelte-4lqe40"),A(r,"transform",o="translate("+t[13].x+", "+t[13].y+") scale("+t[13].k+")"),A(e,"width",t[9]),A(e,"height",t[10]),A(n,"class","map-container svelte-4lqe40"),A(n,"aria-hidden",f=typeof t[3]>"u"),A(n,"role",t[3]),A(n,"aria-label",t[4]),ur(()=>t[32].call(n)),Se(n,"height",s)},m(S,k){tn(S,n,k),j(n,e),j(e,i),j(e,r),_&&_.m(r,null),j(n,l),w&&w.m(n,null),j(n,u),y&&y.m(n,null),t[31](n),a=ar(n,t[32].bind(n)),h=!0,c||(p=[St(i,"mousemove",t[20]),St(i,"click",t[21]),St(i,"mouseout",t[29]),St(i,"blur",t[30])],c=!0)},p(S,k){(!h||k[0]&512)&&A(i,"width",S[9]),(!h||k[0]&1024)&&A(i,"height",S[10]),(!h||k[0]&128)&&A(i,"fill",S[7]),_&&_.p&&(!h||k[1]&4)&&ai(_,g,S,S[33],h?ci(g,S[33],k,null):fi(S[33]),null),(!h||k[0]&8192&&o!==(o="translate("+S[13].x+", "+S[13].y+") scale("+S[13].k+")"))&&A(r,"transform",o),(!h||k[0]&512)&&A(e,"width",S[9]),(!h||k[0]&1024)&&A(e,"height",S[10]),S[5]?w?(w.p(S,k),k[0]&32&&ft(w,1)):(w=ni(S),w.c(),ft(w,1),w.m(n,u)):w&&(we(),_t(w,1,1,()=>{w=null}),_e()),S[11]?y?(y.p(S,k),k[0]&2048&&ft(y,1)):(y=ei(S),y.c(),ft(y,1),y.m(n,null)):y&&(we(),_t(y,1,1,()=>{y=null}),_e()),(!h||k[0]&8&&f!==(f=typeof S[3]>"u"))&&A(n,"aria-hidden",f),(!h||k[0]&8)&&A(n,"role",S[3]),(!h||k[0]&16)&&A(n,"aria-label",S[4]),k[0]&518&&s!==(s=`${se(S[9],S[1],S[2])}px`)&&Se(n,"height",s)},i(S){h||(ft(_,S),ft(w),ft(y),h=!0)},o(S){_t(_,S),_t(w),_t(y),h=!1},d(S){S&&Q(n),_&&_.d(S),w&&w.d(),y&&y.d(),t[31](null),a(),c=!1,ui(p)}}}function se(t,n,e){return e?t/e:n}function gs(t,n,e){let i,r,o,l,u,f,a;Ln(t,gr,C=>e(37,f=C));let{$$slots:s={},$$scope:h}=n,{features:c}=n,{projection:p=$r}=n,{controlPosition:g="bottom-right"}=n,{height:_=600}=n,{aspectRatio:w=void 0}=n,{ariaRole:y=void 0}=n,{ariaLabel:S=void 0}=n,{zoomable:k=!1}=n,{maxZoom:b=8}=n,{scrollWheel:z="ctrl"}=n,{backgroundColor:T="transparent"}=n,{tooltipContainParent:V=!1}=n;const N=fr();let I=500;const Z=Nn(l);let L=Nn(tt);Ln(t,L,C=>e(13,a=C));let H,x,d,m=Nn(null);Ln(t,m,C=>e(36,u=C));function v(C){u||e(11,d=C)}function E(C){if(u){e(11,d=void 0),Pn(m,u=null,u);return}Pn(m,u=C.props,u),e(11,d=C)}function M(C){x=wt(C.querySelector("svg")),H=fs().scaleExtent([1,b]).filter(Pt=>z==="ctrl"?Pt.type==="wheel"?Pt.ctrlKey||Pt.metaKey:!0:z==="no"?Pt.type!=="wheel":!0).on("zoom",({transform:Pt})=>L.set(Pt)),x.call(H)}function R(){f?x.call(H.scaleBy,2):x.transition().call(H.scaleBy,2)}function P(){f?x.call(H.scaleBy,.5):x.transition().call(H.scaleBy,.5)}function D(){f?x.call(H.transform,tt):x.transition().call(H.transform,tt)}function B(C){u||e(11,d=void 0),N("mousemove")}function G(C){Pn(m,u=null,u),e(11,d=void 0),N("click")}let X;cr(()=>{k&&M(X)});const K=C=>N("mouseout"),ut=C=>N("mouseout");function $(C){sr[C?"unshift":"push"](()=>{X=C,e(12,X)})}function st(){I=this.clientWidth,e(9,I)}return t.$$set=C=>{"features"in C&&e(22,c=C.features),"projection"in C&&e(23,p=C.projection),"controlPosition"in C&&e(0,g=C.controlPosition),"height"in C&&e(1,_=C.height),"aspectRatio"in C&&e(2,w=C.aspectRatio),"ariaRole"in C&&e(3,y=C.ariaRole),"ariaLabel"in C&&e(4,S=C.ariaLabel),"zoomable"in C&&e(5,k=C.zoomable),"maxZoom"in C&&e(6,b=C.maxZoom),"scrollWheel"in C&&e(24,z=C.scrollWheel),"backgroundColor"in C&&e(7,T=C.backgroundColor),"tooltipContainParent"in C&&e(8,V=C.tooltipContainParent),"$$scope"in C&&e(33,h=C.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&4194304&&e(25,i=vi(c)),t.$$.dirty[0]&518&&e(10,r=se(I,_,w)),t.$$.dirty[0]&1536&&e(27,o=[I,r]),t.$$.dirty[0]&146800640&&e(26,l=p().fitSize(o,{type:"FeatureCollection",features:c})),t.$$.dirty[0]&67108864&&Z.set(l),t.$$.dirty[0]&33554432&&hr("map",{projection:Z,features:i,transform:L,stickyHighlight:m,handleLayerMousemove:v,handleLayerClick:E})},[g,_,w,y,S,k,b,T,V,I,r,d,X,a,N,L,m,R,P,D,B,G,c,p,z,i,l,o,s,K,ut,$,st,h]}class vs extends ri{constructor(n){super(),oi(this,n,gs,ms,li,{features:22,projection:23,controlPosition:0,height:1,aspectRatio:2,ariaRole:3,ariaLabel:4,zoomable:5,maxZoom:6,scrollWheel:24,backgroundColor:7,tooltipContainParent:8},null,[-1,-1])}}vs.__docgen={version:3,name:"SVGMap.svelte",data:[{keywords:[{name:"type",description:"{Object[]}"}],visibility:"public",description:"An array of geojson features to be displayed on the map. The map will scale the projection to fit this set of features.",name:"features",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"Object[]",type:"Object[]"}},{keywords:[{name:"type",description:"{ function } [projection = geoAlbersUsa]"}],visibility:"public",description:"A D3 geo projection to use with this map. Defaults to geoAlbersUsa.",name:"projection",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"function",type:"function"}},{keywords:[{name:"type",description:'{"bottom-left" | "bottom-right" | "top-left" | "top-right"} [ controlPosition = "bottom-right" ]'}],visibility:"public",description:"Where the zoom control UI should be positioned.",name:"controlPosition",kind:"let",static:!1,readonly:!1,type:{kind:"union",text:'"bottom-left" | "bottom-right" | "top-left" | "top-right"',type:[{kind:"type",text:'"bottom-left"',type:'"bottom-left"'},{kind:"type",text:'"bottom-right"',type:'"bottom-right"'},{kind:"type",text:'"top-left"',type:'"top-left"'},{kind:"type",text:'"top-right"',type:'"top-right"'}]},defaultValue:"bottom-right"},{keywords:[{name:"type",description:"{ number } [ height = 600 ]"}],visibility:"public",description:"The height of the map in pixels.",name:"height",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:600},{keywords:[{name:"type",description:"{ number } [ aspectRatio = undefined ]"}],visibility:"public",description:"Set the height of the map to a fixed aspect ratio based on width. This overrides the `height` property.",name:"aspectRatio",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"}},{keywords:[{name:"type",description:"{ string } [ariaRole = undefined]"}],visibility:"public",description:"Optional aria role string to be applied to SVG container. By default, the SVG is hidden from the accessiblity tree. If you add an ariaRole here, any layers should also be given an ariaRole.",name:"ariaRole",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"}},{keywords:[{name:"type",description:"{ string } [ariaRole = undefined]"}],visibility:"public",description:"Optional aria label string to be applied to SVG container. By default, the SVG is hidden from the accessiblity tree and should include a descriptive label. If you add an ariaRole this property can be left undefined;",name:"ariaLabel",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"}},{keywords:[{name:"type",description:"{ boolean } [zoomable = false]"}],visibility:"public",description:"Should the map allow zoom and pan?",name:"zoomable",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1},{keywords:[{name:"type",description:"{ number } [maxZoom = 8]"}],visibility:"public",description:"If map is zoomable, sets a maximum zoom factor relative to the initial view.",name:"maxZoom",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"number",type:"number"},defaultValue:8},{keywords:[{name:"type",description:'{"no" | "yes" | "ctrl"}'}],visibility:"public",description:"Whether or not the map should zoom when scroll wheel is used on map.",name:"scrollWheel",kind:"let",static:!1,readonly:!1,type:{kind:"union",text:'"no" | "yes" | "ctrl"',type:[{kind:"type",text:'"no"',type:'"no"'},{kind:"type",text:'"yes"',type:'"yes"'},{kind:"type",text:'"ctrl"',type:'"ctrl"'}]},defaultValue:"ctrl"},{keywords:[{name:"type",description:'{ string } [backgroundColor = "transparent"]'}],visibility:"public",description:"Fill for the background of the map",name:"backgroundColor",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"string",type:"string"},defaultValue:"transparent"},{keywords:[{name:"type",description:"{ boolean } [tooltipContainParent = false]"}],visibility:"public",description:"If there is a tooltip on the map, should it be contained to the parent element",name:"tooltipContainParent",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"boolean",type:"boolean"},defaultValue:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"mousemove"},{visibility:"public",description:null,keywords:[],name:"click"},{visibility:"public",description:null,keywords:[],name:"mouseout"}],slots:[{keywords:[],visibility:"public",description:"",name:"default"},{keywords:[],visibility:"public",description:"",name:"tooltip",params:[{name:"props",type:{kind:"type",text:"*",type:"any"}}],parameters:[{name:"props",type:{kind:"type",text:"*",type:"any"}}]}],refs:[]};function Rs(t,n,e){return typeof n=="string"?n:n(t)||e}function Cs(t,n){return typeof n=="string"?n:n(t)}function ii(t,n){for(const e in t){const i=Object.keys(n).includes(e);if(i&&n[e]!==t[e]||!i)return!1}return!0}function Ls(t){t.parentNode.appendChild(t)}function Ps(t,n){return{x:t.pageX,y:t.pageY,props:n.properties}}function Ns(t,n,e){return!!(n&&ii(n,t.properties)||e&&ii(e,t.properties))}export{vs as S,Rs as a,Cs as b,Ns as c,Ps as d,O as e,Ms as f,Ts as g,zs as h,rt as i,_r as j,Es as k,bs as l,As as p,Ls as r,lt as t};

import{p as $t,g as o,f as ht,y as j,t as w,b as p,d as te,Z as ee,T as ne,s as Z,c as D,i as t,e as mt,Q as _t,a as $,x as I,h as q}from"./iframe-BjxEKEQH.js";import{e as tt,i as et}from"./each-DC_8OmU5.js";import{s as n}from"./attributes-UJeNkN1P.js";import{s as Mt}from"./class-B9SFUanI.js";import{s as St}from"./style-CNURdi_Z.js";import{b as ie}from"./size-C1syiTDZ.js";import{u as ae}from"./urbanColors-BkxYcPwH.js";import{a as re,b as le,d as se,f as At}from"./linear-zaFmwBME.js";import{i as qt}from"./init-DewmRu03.js";import{I as Lt}from"./index-_doEQLKC.js";import{a as oe}from"./quantile-Dc72mZUz.js";function Ot(r,e,g){r=+r,e=+e,g=(l=arguments.length)<2?(e=r,r=0,1):l<3?1:+g;for(var i=-1,l=Math.max(0,Math.ceil((e-r)/g))|0,d=new Array(l);++i<l;)d[i]=r+i*g;return d}function de(r,e){for(var g=new Array(e),i=0;i<e;++i)g[i]=r(i/(e-1));return g}const Ct=Symbol("implicit");function Rt(){var r=new Lt,e=[],g=[],i=Ct;function l(d){let s=r.get(d);if(s===void 0){if(i!==Ct)return i;r.set(d,s=e.push(d)-1)}return g[s%g.length]}return l.domain=function(d){if(!arguments.length)return e.slice();e=[],r=new Lt;for(const s of d)r.has(s)||r.set(s,e.push(s)-1);return l},l.range=function(d){return arguments.length?(g=Array.from(d),l):g.slice()},l.unknown=function(d){return arguments.length?(i=d,l):i},l.copy=function(){return Rt(e,g).unknown(i)},qt.apply(l,arguments),l}function jt(){var r=Rt().unknown(void 0),e=r.domain,g=r.range,i=0,l=1,d,s,v=!1,h=0,B=0,K=.5;delete r.unknown;function M(){var c=e().length,_=l<i,F=_?l:i,lt=_?i:l;d=(lt-F)/Math.max(1,c-h+B*2),v&&(d=Math.floor(d)),F+=(lt-F-d*(c-h))*K,s=d*(1-h),v&&(F=Math.round(F),s=Math.round(s));var st=Ot(c).map(function(vt){return F+d*vt});return g(_?st.reverse():st)}return r.domain=function(c){return arguments.length?(e(c),M()):e()},r.range=function(c){return arguments.length?([i,l]=c,i=+i,l=+l,M()):[i,l]},r.rangeRound=function(c){return[i,l]=c,i=+i,l=+l,v=!0,M()},r.bandwidth=function(){return s},r.step=function(){return d},r.round=function(c){return arguments.length?(v=!!c,M()):v},r.padding=function(c){return arguments.length?(h=Math.min(1,B=+c),M()):h},r.paddingInner=function(c){return arguments.length?(h=Math.min(1,c),M()):h},r.paddingOuter=function(c){return arguments.length?(B=+c,M()):B},r.align=function(c){return arguments.length?(K=Math.max(0,Math.min(1,c)),M()):K},r.copy=function(){return jt(e(),[i,l]).round(v).paddingInner(h).paddingOuter(B).align(K)},qt.apply(M(),arguments)}var ce=ht('<p class="legend-title svelte-1ioe3b8"> </p>'),ue=q("<stop></stop>"),fe=q("<defs><linearGradient></linearGradient></defs><rect></rect>",1),ye=q("<stop></stop>"),pe=q("<defs><linearGradient></linearGradient></defs><rect></rect>",1),ge=q('<rect y="0"></rect>'),me=q("<rect></rect>"),he=q('<rect y="0"></rect>'),ve=q("<line></line>"),be=q('<!><text fill="black"> </text>',1),ke=q('<text fill="black"> </text>'),xe=q('<g class="legend-ticks"><!><!></g>'),we=q('<svg><g class="legend-inner"><!><!><!></g></svg>'),_e=ht('<div><div class="swatch-color svelte-1ioe3b8"></div> <span class="swatch-label svelte-1ioe3b8"> </span></div>'),Se=ht("<div></div>"),Oe=ht('<div class="legend-wrapper"><!> <!></div>');function ze(r,e){$t(e,!0);let g=o(e,"title",3,void 0),i=o(e,"height",3,10),l=o(e,"ticks",3,5),d=o(e,"tickValues",3,void 0),s=o(e,"tickSize",3,14),v=o(e,"tickPosition",3,"bottom"),h=o(e,"tickMargin",3,5),B=o(e,"tickTextAnchor",3,"auto"),K=o(e,"tickFormat",3,void 0),M=o(e,"tickLineWidth",3,1),c=o(e,"tickLineColor",19,()=>ae.black),_=o(e,"margin",19,()=>({top:0,right:0,bottom:5,left:0})),F=o(e,"maxWidth",3,void 0),lt=o(e,"swatch",3,!1),st=o(e,"swatchLayout",3,"row"),vt=o(e,"swatchAlign",3,"flex-start"),Dt=o(e,"swatchSize",3,16),Gt=o(e,"swatchCircle",3,!1),It=o(e,"swatchSpacing",3,void 0),ot=o(e,"naFill",3,void 0),Ft=o(e,"naLabel",3,"NA"),bt=o(e,"naSize",3,16),kt=o(e,"naSpacing",3,16),U=ne(0),nt=I(()=>e.scale.domain()),dt=I(()=>e.scale.range()),it=I(()=>ot()?t(U)-_().left-_().right-bt()-kt():t(U)-_().left-_().right),A=I(()=>Et(e.scale)),xt=I(()=>t(A)==="threshold"?e.scale.thresholds?e.scale.thresholds():e.scale.quantiles?e.scale.quantiles():e.scale.domain():void 0),G=I(()=>Wt(e.scale,t(A),t(it),t(dt))),Nt=I(()=>Tt(K(),t(xt))),Pt=I(()=>Ht(t(A),t(G),t(xt),d(),l()));const ct=Qt();function Tt(a,u){if(u){const m=a===void 0?O=>O:typeof a=="string"?At(a):a;return O=>m(u[O],O)}return typeof a=="string"?At(a):a&&!u?a:m=>m}function Wt(a,u,m,O){if(u==="continuous"){const E=Math.min(a.domain().length,a.range().length);return a.copy().rangeRound(de(re(0,m),E))}else return u==="sequential"?Object.assign(a.copy().interpolator(le(0,m)),{range(){return[0,m]}}):u==="threshold"?se().domain([-1,O.length-1]).rangeRound([0,m]):jt().domain(a.domain()).rangeRound([0,m])}function Et(a){return a.interpolate?"continuous":a.interpolator?"sequential":a.invertExtent?"threshold":"ordinal"}function Ht(a,u,m,O,E){if(O)return O;let N=u.domain();if(a==="sequential"&&!u.ticks){const L=Math.round(E+1);return Ot(L).map(J=>oe(N,J/(L-1)))}else{if(a==="threshold")return Ot(m.length);if(a==="ordinal")return N}return u.ticks(E)}function Qt(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function Xt(a,u,m,O,E){return m!=="auto"?m:O==="ordinal"||E?"middle":a===u[0]?"start":a===u[u.length-1]?"end":"middle"}var ut=Oe();let zt;var Vt=D(ut);{var Zt=a=>{var u=ce(),m=D(u);w(()=>mt(m,g())),p(a,u)};j(Vt,a=>{g()&&a(Zt)})}var Bt=Z(Vt,2);{var Jt=a=>{var u=_t(),m=$(u);{var O=N=>{var L=we(),J=D(L),ft=D(J);{var yt=b=>{var k=fe(),P=$(k),Y=D(P);tt(Y,21,()=>t(dt),et,(C,f,R)=>{var y=ue();w(()=>{n(y,"offset",`${100/(t(dt).length-1)*R}%`),n(y,"stop-color",t(f))}),p(C,y)});var z=Z(P);w(()=>{n(Y,"id",ct),n(z,"fill",`url(#${ct??""})`),n(z,"width",t(it)),n(z,"height",i()),n(z,"y",v()==="bottom"?0:s()+h())}),p(b,k)},at=(b,k)=>{{var P=z=>{var C=pe(),f=$(C),R=D(f);tt(R,21,()=>t(nt),et,(H,Q,T)=>{var x=ye();w(W=>{n(x,"offset",`${100*(T/(t(nt).length-1))}%`),n(x,"stop-color",W)},[()=>e.scale(t(Q))]),p(H,x)});var y=Z(f);w(()=>{n(R,"id",ct),n(y,"fill",`url(#${ct??""})`),n(y,"width",t(it)),n(y,"height",i()),n(y,"y",v()==="bottom"?0:s()+h())}),p(z,C)},Y=(z,C)=>{{var f=y=>{var H=_t(),Q=$(H);tt(Q,17,()=>t(dt),et,(T,x,W)=>{var V=ge();w((S,X)=>{n(V,"x",S),n(V,"width",X),n(V,"height",i()),n(V,"fill",t(x))},[()=>t(G)(W-1),()=>t(G)(W)-t(G)(W-1)]),p(T,V)}),p(y,H)},R=(y,H)=>{{var Q=T=>{var x=_t(),W=$(x);tt(W,17,()=>t(nt),et,(V,S)=>{var X=me();w((Kt,Ut,Yt)=>{n(X,"x",Kt),n(X,"y",v()==="bottom"?0:s()+h()),n(X,"width",Ut),n(X,"height",i()),n(X,"fill",Yt)},[()=>t(G)(t(S)),()=>Math.max(0,t(G).bandwidth()-1),()=>e.scale(t(S))]),p(V,X)}),p(T,x)};j(y,T=>{t(A)==="ordinal"&&T(Q)},H)}};j(z,y=>{t(A)==="threshold"?y(f):y(R,!1)},C)}};j(b,z=>{t(A)==="sequential"?z(P):z(Y,!1)},k)}};j(ft,b=>{t(A)==="continuous"?b(yt):b(at,!1)})}var rt=Z(ft);{var pt=b=>{var k=he();w(()=>{n(k,"x",t(it)+_().left+kt()),n(k,"width",bt()),n(k,"height",i()),n(k,"fill",ot())}),p(b,k)};j(rt,b=>{ot()&&b(pt)})}var gt=Z(rt);{var wt=b=>{var k=xe(),P=D(k);tt(P,17,()=>t(Pt),et,(C,f)=>{var R=be();const y=I(()=>t(A)==="ordinal"?t(G)(t(f))+t(G).bandwidth()/2:t(G)(t(f))),H=I(()=>v()==="top"?0:i()+h()+s());var Q=$(R);{var T=V=>{var S=ve();w(()=>{n(S,"x1",t(y)),n(S,"x2",t(y)),n(S,"y1",v()==="bottom"?0:i()+h()+s()),n(S,"y2",v()==="bottom"?i()+h():s()),n(S,"stroke",c()),n(S,"stroke-width",M())}),p(V,S)};j(Q,V=>{t(A)!=="ordinal"&&M()&&V(T)})}var x=Z(Q),W=D(x);w((V,S)=>{n(x,"alignment-baseline",v()==="top"?"hanging":"baseline"),n(x,"y",t(H)),n(x,"x",t(y)),n(x,"font-size",`${s()??""}px`),n(x,"text-anchor",V),mt(W,S)},[()=>Xt(t(f),t(nt),B(),t(A),t(xt)),()=>t(Nt)(t(f))]),p(C,R)});var Y=Z(P);{var z=C=>{var f=ke();n(f,"text-anchor","middle");var R=D(f);w(()=>{n(f,"alignment-baseline",v()==="top"?"hanging":"baseline"),n(f,"y",v()==="top"?0:i()+h()+s()),n(f,"x",t(it)+_().left+kt()+bt()/2),n(f,"font-size",`${s()??""}px`),mt(R,Ft())}),p(C,f)};j(Y,C=>{ot()&&C(z)})}p(b,k)};j(gt,b=>{t(A)&&t(U)&&t(G)&&b(wt)})}w(()=>{n(L,"width",t(U)),n(L,"height",i()+s()+h()+_().top+_().bottom),n(J,"transform",`translate(${_().left??""}, ${_().top??""})`)}),p(N,L)},E=N=>{var L=Se();let J;tt(L,21,()=>t(nt),et,(ft,yt)=>{var at=_e();let rt;var pt=D(at);let gt;var wt=Z(pt,2),b=D(wt);w((k,P)=>{rt=Mt(at,1,"swatch-item svelte-1ioe3b8",null,rt,k),gt=St(pt,"",gt,{"background-color":P}),mt(b,t(yt))},[()=>({"swatch-circle":Gt()}),()=>e.scale(t(yt))]),p(ft,at)}),w(()=>{Mt(L,1,`swatch-wrap swatch-layout-${st()??""}`,"svelte-1ioe3b8"),J=St(L,"",J,{"--swatch-font-size":`${s()??""}px`,"--swatch-color-size":`${Dt()??""}px`,"--swatch-align":vt(),"--swatch-spacing":It()})}),p(N,L)};j(m,N=>{t(A)==="ordinal"&&lt()?N(E,!1):N(O)})}p(a,u)};j(Bt,a=>{t(U)&&a(Jt)})}w(()=>zt=St(ut,"",zt,{"max-width":F()!=null?F()+"px":null,"padding-bottom":"10px"})),ie(ut,"clientWidth",a=>ee(U,a)),p(r,ut),te()}ze.__docgen={data:[{name:"scale",visibility:"public",description:"D3 scale to base legend on",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"object",text:"Function"},static:!1,readonly:!1},{name:"title",visibility:"public",description:"Optional title for the legend",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"height",visibility:"public",description:"Height of the visual element of the legend",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"10"},{name:"ticks",visibility:"public",description:"Optional number of ticks to pass to d3's generator",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"5"},{name:"tickValues",visibility:"public",description:"Optional array of exact values to use as ticks",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"any[]"},static:!1,readonly:!1},{name:"tickSize",visibility:"public",description:"Optional size for tick labels",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"14"},{name:"tickPosition",visibility:"public",description:"Should ticks be positioned above or below the color bars?",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"top",text:'"top"'},{kind:"const",type:"string",value:"bottom",text:'"bottom"'}],text:'"top" | "bottom"'},static:!1,readonly:!1,defaultValue:'"bottom"'},{name:"tickMargin",visibility:"public",description:"Optional size of space between color and tick labels",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"5"},{name:"tickTextAnchor",visibility:"public",description:"Optionally set the text-anchor of all tick marks",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"auto",text:'"auto"'},{kind:"const",type:"string",value:"middle",text:'"middle"'},{kind:"const",type:"string",value:"start",text:'"start"'},{kind:"const",type:"string",value:"end",text:'"end"'}],text:'"auto" | "middle" | "start" | "end"'},static:!1,readonly:!1,defaultValue:'"auto"'},{name:"tickFormat",visibility:"public",description:"Optional tick formatting string or function",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"type",type:"string",text:"string"},{kind:"function",text:"(a: Object) => string"}],text:"string | (a: Object) => string"},static:!1,readonly:!1},{name:"tickLineWidth",visibility:"public",description:"Width of tick line. Set to 0 if no line is needed.",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"1"},{name:"tickLineColor",visibility:"public",description:"Color of tick line.",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"margin",visibility:"public",description:"Optional margin object",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ top: number; right: number; bottom: number; left: number; }"},static:!1,readonly:!1,defaultValue:`{
      top: 0,
      right: 0,
      bottom: 5,
      left: 0
    }`},{name:"maxWidth",visibility:"public",description:"Optional max width for the legend",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1},{name:"swatch",visibility:"public",description:"Display ordinal scale as swatches rather than bars",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"swatchLayout",visibility:"public",description:"Display swatches in a row or column layout",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"row",text:'"row"'},{kind:"const",type:"string",value:"column",text:'"column"'}],text:'"row" | "column"'},static:!1,readonly:!1,defaultValue:'"row"'},{name:"swatchAlign",visibility:"public",description:"A flexbox alignment value",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"flex-start",text:'"flex-start"'},{kind:"const",type:"string",value:"center",text:'"center"'},{kind:"const",type:"string",value:"flex-end",text:'"flex-end"'}],text:'"flex-start" | "center" | "flex-end"'},static:!1,readonly:!1,defaultValue:'"flex-start"'},{name:"swatchSize",visibility:"public",description:"Size of swatch in pixels",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"16"},{name:"swatchCircle",visibility:"public",description:"Display swatches as circles rather than squares",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"swatchSpacing",visibility:"public",description:"Optional override space between swatch items",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"naFill",visibility:"public",description:"Optional color to indicate for NA values",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"naLabel",visibility:"public",description:"Optional string label for NA values",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"NA"'},{name:"naSize",visibility:"public",description:"Optional size in pixels for naLabel",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"16"},{name:"naSpacing",visibility:"public",description:"Optional amount of spacing in pixels for NA swatch and label",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"16"}],name:"ColorLegend.svelte"};export{ze as C,Rt as o};
